(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"5PDx":function(l,n,e){"use strict";e.r(n);var u=e("8Y7J");class t{}var o=e("pMnS"),s=e("MKJQ"),i=e("sZkV"),a=e("SVse"),r=e("lGQG"),c=e("sjK5"),b=e("rKbp"),h=e("+/my");class d{constructor(l,n,e,u,t,o){this.nav=l,this.router=n,this.firebaseAuthService=e,this.chatService=u,this.cameraPreview=t,this.videocallSVC=o,this.users=[],this.Users=[],this.llamando=!1}ngOnInit(){this.user=JSON.parse(sessionStorage.getItem("user")),this.getUser(),this.getCalls()}getUsers(){this.chatService.getUsers().orderByChild("type").equalTo("User").on("value",l=>{const n=(l=>{const n=[];return l.forEach(l=>{const e=l.val();e.key=l.key,n.push(e)}),n})(l);console.log(n),this.users=n,this.users=this.users.filter(l=>l.uid!=this.firebaseAuthService.usersign.uid)})}openCall(l){let n={user:this.user,usercall:l,type:"caller"},e={queryParams:{special:JSON.stringify(n)}};console.log(n,"DATA"),this.videocallSVC.newcall(this.user,l),this.router.navigate(["call"],e)}getUser(){this.videocallSVC.getUsers().on("value",l=>{this.Users=[],l.forEach(l=>{const n=l.val();n.key=l.key,n.key!=this.user.uid&&(console.log(n),console.log(this.user),this.videocallSVC.getRel(this.user,n.key).once("value",l=>{console.log(l),console.log(l.val()),n.selected=l.val(),l.val()&&this.Users.push(n)}))}),console.log(this.Users)})}getCalls(){this.videocallSVC.getCalls(this.user).on("value",l=>{console.log(l.val()),l.forEach(l=>{console.log(l.key),this.videocallSVC.getCall(l.key).on("value",l=>{if(console.log(l.val()),l.val().state){this.llamando=!0,this.keycall=l.val().channel;let n=Object.keys(l.val().Members);for(let l=0;l<n.length;l++)n[l]!=this.user.uid&&this.videocallSVC.getUser(n[l]).once("value",l=>{this.usercall=l.val(),console.log(this.usercall)})}else this.llamando=!1})})})}resVideoCall(){let l={user:this.user,usercall:this.usercall,type:"answer"},n={queryParams:{special:JSON.stringify(l)}};this.videocallSVC.keycall=this.keycall,this.videocallSVC.answerccall(this.user,this.keycall),console.log(l,"DATA"),this.router.navigate(["call"],n)}}var m=e("iInd"),f=u.pb({encapsulation:0,styles:[["ion-header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{color:var(--ion-color-primary-dark)}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:var(--ion-color-primary-dark);text-align:center;font-size:18px;font-family:sfUi-m;text-transform:capitalize}"]],data:{}});function v(l){return u.Mb(0,[(l()(),u.rb(0,0,null,null,3,"ion-fab-button",[["class","call-green"],["d",""]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.resVideoCall()&&u),u}),s.Z,s.m)),u.qb(1,49152,null,0,i.x,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,1,"ion-icon",[["name","call-outline"]],null,null,null,s.fb,s.r)),u.qb(3,49152,null,0,i.C,[u.h,u.k,u.x],{name:[0,"name"]},null)],(function(l,n){l(n,3,0,"call-outline")}),null)}function g(l){return u.Mb(0,[(l()(),u.rb(0,0,null,null,10,"ion-item",[["lines","full"],["mode","md"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.openCall(l.context.$implicit)&&u),u}),s.hb,s.t)),u.qb(1,49152,null,0,i.H,[u.h,u.k,u.x],{lines:[0,"lines"],mode:[1,"mode"]},null),(l()(),u.rb(2,0,null,0,2,"ion-avatar",[["slot","start"]],null,null,null,s.P,s.b)),u.qb(3,49152,null,0,i.f,[u.h,u.k,u.x],null,null),(l()(),u.rb(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),u.rb(5,0,null,0,5,"ion-label",[],null,null,null,s.ib,s.u)),u.qb(6,49152,null,0,i.N,[u.h,u.k,u.x],null,null),(l()(),u.rb(7,0,null,0,1,"h3",[["class","name"]],null,null,null,null,null)),(l()(),u.Kb(8,null,["",""])),(l()(),u.rb(9,0,null,0,1,"p",[["class","detail"]],null,null,null,null,null)),(l()(),u.Kb(10,null,["",""]))],(function(l,n){l(n,1,0,"full","md")}),(function(l,n){l(n,4,0,null==n.context.$implicit?null:n.context.$implicit.photoUrl),l(n,8,0,null==n.context.$implicit?null:n.context.$implicit.displayName),l(n,10,0,null==n.context.$implicit?null:n.context.$implicit.email)}))}function p(l){return u.Mb(0,[(l()(),u.rb(0,0,null,null,15,"ion-header",[["class","ion-no-border"]],null,null,null,s.eb,s.q)),u.qb(1,49152,null,0,i.B,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,13,"ion-toolbar",[["mode","md"]],null,null,null,s.Bb,s.N)),u.qb(3,49152,null,0,i.zb,[u.h,u.k,u.x],{mode:[0,"mode"]},null),(l()(),u.rb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,s.T,s.f)),u.qb(5,49152,null,0,i.l,[u.h,u.k,u.x],null,null),(l()(),u.rb(6,0,null,0,2,"ion-back-button",[["defaultHref","home"],["icon","chevron-back-outline"],["mode","md"],["text",""]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Cb(l,8).onClick(e)&&t),t}),s.Q,s.c)),u.qb(7,49152,null,0,i.g,[u.h,u.k,u.x],{defaultHref:[0,"defaultHref"],icon:[1,"icon"],mode:[2,"mode"],text:[3,"text"]},null),u.qb(8,16384,null,0,i.h,[[2,i.fb],i.Gb,i.d],{defaultHref:[0,"defaultHref"]},null),(l()(),u.rb(9,0,null,0,3,"ion-buttons",[["slot","end"]],null,null,null,s.T,s.f)),u.qb(10,49152,null,0,i.l,[u.h,u.k,u.x],null,null),(l()(),u.rb(11,0,null,0,1,"ion-menu-button",[],null,null,null,s.lb,s.y)),u.qb(12,49152,null,0,i.R,[u.h,u.k,u.x],null,null),(l()(),u.rb(13,0,null,0,2,"ion-title",[],null,null,null,s.zb,s.L)),u.qb(14,49152,null,0,i.xb,[u.h,u.k,u.x],null,null),(l()(),u.Kb(-1,0,["Video call"])),(l()(),u.rb(16,0,null,null,6,"ion-content",[["class","ion-padding-bottom"]],null,null,null,s.X,s.j)),u.qb(17,49152,null,0,i.u,[u.h,u.k,u.x],null,null),(l()(),u.rb(18,0,null,0,4,"div",[["class","today_div"]],null,null,null,null,null)),(l()(),u.gb(16777216,null,null,1,null,v)),u.qb(20,16384,null,0,a.k,[u.O,u.K],{ngIf:[0,"ngIf"]},null),(l()(),u.gb(16777216,null,null,1,null,g)),u.qb(22,278528,null,0,a.j,[u.O,u.K,u.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,3,0,"md"),l(n,7,0,"home","chevron-back-outline","md",""),l(n,8,0,"home"),l(n,20,0,e.llamando),l(n,22,0,e.Users)}),null)}function k(l){return u.Mb(0,[(l()(),u.rb(0,0,null,null,1,"app-call-list",[],null,null,null,p,f)),u.qb(1,114688,null,0,d,[i.Gb,m.m,r.a,c.a,b.a,h.a],null,null)],(function(l,n){l(n,1,0)}),null)}var x=u.nb("app-call-list",d,k,{},{},[]),y=e("s7LF");class C{}e.d(n,"CallUsersListPageModuleNgFactory",(function(){return q}));var q=u.ob(t,[],(function(l){return u.zb([u.Ab(512,u.j,u.Z,[[8,[o.a,x]],[3,u.j],u.v]),u.Ab(4608,a.m,a.l,[u.s,[2,a.v]]),u.Ab(4608,y.o,y.o,[]),u.Ab(4608,i.b,i.b,[u.x,u.g]),u.Ab(4608,i.Fb,i.Fb,[i.b,u.j,u.p]),u.Ab(4608,i.Jb,i.Jb,[i.b,u.j,u.p]),u.Ab(1073742336,a.c,a.c,[]),u.Ab(1073742336,y.n,y.n,[]),u.Ab(1073742336,y.e,y.e,[]),u.Ab(1073742336,i.Bb,i.Bb,[]),u.Ab(1073742336,m.o,m.o,[[2,m.t],[2,m.m]]),u.Ab(1073742336,C,C,[]),u.Ab(1073742336,t,t,[]),u.Ab(1024,m.k,(function(){return[[{path:"",component:d}]]}),[])])}))}}]);