function _defineProperties(n,l){for(var t=0;t<l.length;t++){var o=l[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function _createClass(n,l,t){return l&&_defineProperties(n.prototype,l),t&&_defineProperties(n,t),n}function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{HPQy:function(n,l,t){"use strict";t.r(l);var o=t("8Y7J"),e=function n(){_classCallCheck(this,n)},i=t("pMnS"),a=t("MKJQ"),c=t("sZkV"),r=t("SVse"),u=t("lGQG"),s=t("sjK5"),g=function(){function n(l,t,o){_classCallCheck(this,n),this.nav=l,this.chatService=t,this.firebaseAuthService=o,this.Users=[],this.group=!1,this.messages=[],this.users=[],this.chats=[],this.keysUsers=[]}return _createClass(n,[{key:"ngOnInit",value:function(){this.user=JSON.parse(sessionStorage.getItem("user")),this.getUsersChat()}},{key:"getUsers",value:function(){}},{key:"openUsersPage",value:function(){this.nav.navigateForward("/chat-users-list")}},{key:"openChat",value:function(n){var l=this;console.log(n,"chat"),this.group="User"!=n.type,this.chatService.getChat(this.user,n.chatuid).once("value",(function(t){console.log(t.val()),t.val()?(l.chatService.keymessage=n.chatuid,l.chatService.user2=n,n.unread=0,l.nav.navigateForward("/chat2")):l.nav.navigateForward("/chat2")}))}},{key:"getUsersChat",value:function(){var n=this;console.log("buscando chats"),this.Users=[],this.chatService.getUsersChat(this.user).on("value",(function(l){if(l.val()){n.Users=[];var t=Object.keys(l.val());console.log(t),l.forEach((function(l){console.log(l.val()),console.log(l.key);var t=l.key;n.chatService.getChatType(t).on("value",(function(o){console.log(o.val());var e=o.val();if(e.key=l.val(),console.log(e.key),"single"==e.name)n.chatService.getUser(e.key).on("value",(function(l){var o=l.val();o.unread=0,o.chatuid=t,n.chatService.unreadChats(n.user.uid,t).on("value",(function(n){var l=0;console.log(n.val(),"UNREAD"),n.forEach((function(n){l+=1})),console.log(l,"UNREAD2"),o.unread=l})),n.Users.push(o)}));else{var i=o.val(),a=o.val();console.log(i),a.displayName=i.name,a.photoUrl="https://lh3.googleusercontent.com/-oHdxefwfte4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckFwmGRYKK_yKebGqxAIor7JTeCLg/s96-c/photo.jpg",a.unread=0,a.chatuid=t,n.Users.push(a)}}))}))}}))}},{key:"getMessages",value:function(){var n=this;this.chatService.getMessages().on("value",(function(l){n.messages=[],l.forEach((function(l){var t=l.val();console.log(l.val()),n.chatService.getUser(t.sender).on("value",(function(l){t.senderuser=l.val(),n.messages.push(t)}))})),console.log(n.messages)}))}}]),n}(),d=o.pb({encapsulation:0,styles:[[".main_lbl[_ngcontent-%COMP%]{margin-top:18px;margin-bottom:18px}.newuser[_ngcontent-%COMP%]{margin-bottom:12px}ion-header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{color:var(--ion-color-primary-dark)}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:var(--ion-color-primary-dark);text-align:center;font-size:18px;font-family:sfUi-m;text-transform:capitalize}ion-content[_ngcontent-%COMP%]   .main_lbl[_ngcontent-%COMP%]{font-size:18px;color:var(--ion-color-primary-dark);font-family:sfUi-m}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]{padding-left:16px;display:-webkit-box;overflow-x:auto}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 1px 4px 0 rgba(0,0,0,.16);width:285px;margin:10px 20px 10px 0}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]{display:flex;padding:15px;border-bottom:1px solid;border-bottom-color:var(--ion-color-silver)}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:45px;width:45px;border-radius:50px;border:solid 3px var(--ion-color-white);box-shadow:0 0 4px 0 rgba(0,0,0,.25)}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]   .info_div[_ngcontent-%COMP%]{padding-left:15px}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]   .info_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:15px;color:var(--ion-color-primary-dark);font-family:sfUi-m;margin-top:3px;margin-bottom:2px}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]   .info_div[_ngcontent-%COMP%]   .ago[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-primary-light);font-family:sfUi-m;margin:0}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .detail_div[_ngcontent-%COMP%]{padding:15px}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .detail_div[_ngcontent-%COMP%]   .detail_lbl[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-primary-light);font-family:sfUi-m;margin:0}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}ion-content[_ngcontent-%COMP%]   .info_lbl[_ngcontent-%COMP%]{font-size:12px;font-family:sfUi-m;color:var(--ion-color-primary-light)}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]{padding:0 16px}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:0;--inner-padding-end:0}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{height:55px;width:55px}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:solid 3px var(--ion-color-white);box-shadow:0 0 3px 0 rgba(31,140,237,.3)}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:15px;font-family:sfUi-m;color:var(--ion-color-primary-dark)}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;font-family:sfUi-r;color:var(--ion-color-primary-dark)}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{font-size:13px;font-family:sfUi-m;color:var(--ion-color-primary-light)}"]],data:{}});function b(n){return o.Mb(0,[(n()(),o.rb(0,0,null,null,12,"ion-item",[["lines","full"],["mode","md"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.openChat(n.context.$implicit)&&o),o}),a.hb,a.t)),o.qb(1,49152,null,0,c.H,[o.h,o.k,o.x],{lines:[0,"lines"],mode:[1,"mode"]},null),(n()(),o.rb(2,0,null,0,2,"ion-avatar",[["slot","start"]],null,null,null,a.P,a.b)),o.qb(3,49152,null,0,c.f,[o.h,o.k,o.x],null,null),(n()(),o.rb(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.rb(5,0,null,0,4,"ion-label",[],null,null,null,a.ib,a.u)),o.qb(6,49152,null,0,c.N,[o.h,o.k,o.x],null,null),(n()(),o.rb(7,0,null,0,2,"h3",[["class","name"]],null,null,null,null,null)),(n()(),o.Kb(8,null,[""," "])),(n()(),o.rb(9,0,null,null,0,"span",[["class","ion-float-right"]],null,null,null,null,null)),(n()(),o.rb(10,0,null,0,2,"ion-badge",[["color","primary"]],null,null,null,a.R,a.d)),o.qb(11,49152,null,0,c.j,[o.h,o.k,o.x],{color:[0,"color"]},null),(n()(),o.Kb(12,0,["",""]))],(function(n,l){n(l,1,0,"full","md"),n(l,11,0,"primary")}),(function(n,l){n(l,4,0,null==l.context.$implicit?null:l.context.$implicit.photoUrl),n(l,8,0,null==l.context.$implicit?null:l.context.$implicit.displayName),n(l,12,0,null==l.context.$implicit?null:l.context.$implicit.unread)}))}function h(n){return o.Mb(0,[(n()(),o.rb(0,0,null,null,15,"ion-header",[["class","ion-no-border"]],null,null,null,a.eb,a.q)),o.qb(1,49152,null,0,c.B,[o.h,o.k,o.x],null,null),(n()(),o.rb(2,0,null,0,13,"ion-toolbar",[["mode","md"]],null,null,null,a.Bb,a.N)),o.qb(3,49152,null,0,c.zb,[o.h,o.k,o.x],{mode:[0,"mode"]},null),(n()(),o.rb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,a.T,a.f)),o.qb(5,49152,null,0,c.l,[o.h,o.k,o.x],null,null),(n()(),o.rb(6,0,null,0,2,"ion-back-button",[["defaultHref","home"],["icon","chevron-back-outline"],["mode","md"],["text",""]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==o.Cb(n,8).onClick(t)&&e),e}),a.Q,a.c)),o.qb(7,49152,null,0,c.g,[o.h,o.k,o.x],{defaultHref:[0,"defaultHref"],icon:[1,"icon"],mode:[2,"mode"],text:[3,"text"]},null),o.qb(8,16384,null,0,c.h,[[2,c.fb],c.Gb,c.d],{defaultHref:[0,"defaultHref"]},null),(n()(),o.rb(9,0,null,0,3,"ion-buttons",[["slot","end"]],null,null,null,a.T,a.f)),o.qb(10,49152,null,0,c.l,[o.h,o.k,o.x],null,null),(n()(),o.rb(11,0,null,0,1,"ion-menu-button",[],null,null,null,a.lb,a.y)),o.qb(12,49152,null,0,c.R,[o.h,o.k,o.x],null,null),(n()(),o.rb(13,0,null,0,2,"ion-title",[],null,null,null,a.zb,a.L)),o.qb(14,49152,null,0,c.xb,[o.h,o.k,o.x],null,null),(n()(),o.Kb(-1,0,["chat"])),(n()(),o.rb(16,0,null,null,12,"ion-content",[["class","ion-padding-bottom"]],null,null,null,a.X,a.j)),o.qb(17,49152,null,0,c.u,[o.h,o.k,o.x],null,null),(n()(),o.rb(18,0,null,0,1,"h3",[["class","main_lbl ion-padding-start"]],null,null,null,null,null)),(n()(),o.Kb(-1,null,["Chats"])),(n()(),o.rb(20,0,null,0,2,"div",[["class","today_div"]],null,null,null,null,null)),(n()(),o.gb(16777216,null,null,1,null,b)),o.qb(22,278528,null,0,r.j,[o.O,o.K,o.q],{ngForOf:[0,"ngForOf"]},null),(n()(),o.rb(23,0,null,0,5,"ion-fab",[["horizontal","end"],["slot","fixed"],["vertical","bottom"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.openUsersPage()&&o),o}),a.bb,a.l)),o.qb(24,49152,null,0,c.w,[o.h,o.k,o.x],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),o.rb(25,0,null,0,3,"ion-fab-button",[],null,null,null,a.Z,a.m)),o.qb(26,49152,null,0,c.x,[o.h,o.k,o.x],null,null),(n()(),o.rb(27,0,null,0,1,"ion-icon",[["name","chatbubbles-outline"]],null,null,null,a.fb,a.r)),o.qb(28,49152,null,0,c.C,[o.h,o.k,o.x],{name:[0,"name"]},null)],(function(n,l){var t=l.component;n(l,3,0,"md"),n(l,7,0,"home","chevron-back-outline","md",""),n(l,8,0,"home"),n(l,22,0,t.Users),n(l,24,0,"end","bottom"),n(l,28,0,"chatbubbles-outline")}),null)}var f=o.nb("app-chat-list",g,(function(n){return o.Mb(0,[(n()(),o.rb(0,0,null,null,1,"app-chat-list",[],null,null,null,h,d)),o.qb(1,114688,null,0,g,[c.Gb,s.a,u.a],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]),_=t("s7LF"),v=t("iInd"),p=function n(){_classCallCheck(this,n)};t.d(l,"ChatListPageModuleNgFactory",(function(){return m}));var m=o.ob(e,[],(function(n){return o.zb([o.Ab(512,o.j,o.Z,[[8,[i.a,f]],[3,o.j],o.v]),o.Ab(4608,r.m,r.l,[o.s,[2,r.v]]),o.Ab(4608,_.o,_.o,[]),o.Ab(4608,c.b,c.b,[o.x,o.g]),o.Ab(4608,c.Fb,c.Fb,[c.b,o.j,o.p]),o.Ab(4608,c.Jb,c.Jb,[c.b,o.j,o.p]),o.Ab(1073742336,r.c,r.c,[]),o.Ab(1073742336,_.n,_.n,[]),o.Ab(1073742336,_.e,_.e,[]),o.Ab(1073742336,c.Bb,c.Bb,[]),o.Ab(1073742336,v.o,v.o,[[2,v.t],[2,v.m]]),o.Ab(1073742336,p,p,[]),o.Ab(1073742336,e,e,[]),o.Ab(1024,v.k,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);