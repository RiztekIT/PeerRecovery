{"version":3,"sources":["src/app/pages/chat-list/chat-list.page.html","src/app/pages/chat-list/chat-list-routing.module.ts","src/app/pages/chat-list/chat-list.module.ts","src/app/pages/chat-list/chat-list.page.scss","src/app/pages/chat-list/chat-list.page.ts","src/app/services/chat.service.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\n    <ion-toolbar mode=\\\"md\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"home\\\" icon=\\\"chevron-back-outline\\\" text=\\\"\\\" mode=\\\"md\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-menu-button></ion-menu-button>\\n        </ion-buttons>\\n        <ion-title>chat</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content class=\\\"ion-padding-bottom\\\">\\n    <h3 class=\\\"main_lbl ion-padding-start\\\">Chats</h3>\\n    <div class=\\\"today_div\\\">\\n        <ion-item *ngFor=\\\"let chat of this.chatService.chatsUsers\\\" lines=\\\"full\\\" (click)=\\\"openChat(chat)\\\" mode=\\\"md\\\">\\n            <ion-avatar slot=\\\"start\\\">\\n                <img [src]=\\\"chat?.photoUrl\\\">\\n            </ion-avatar>\\n            <ion-label>\\n                <h3 class=\\\"name\\\">{{chat?.displayName}} <span class=\\\"ion-float-right\\\"></span></h3>\\n\\n\\n                <!-- <h3 class=\\\"name\\\">{{chat?.Title}} <span class=\\\"ion-float-right\\\">{{chat?.LastMessageSent.seconds * 1000| date: 'yyyy-MM-dd h:mm: a'}}</span></h3> -->\\n                <!-- <p class=\\\"detail\\\"></p> -->\\n            </ion-label>\\n            <ion-badge color=\\\"primary\\\">{{chat?.unread}}</ion-badge>\\n        </ion-item>\\n    </div>\\n\\n\\n\\n\\n    <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" (click)=\\\"openUsersPage()\\\">\\n        <ion-fab-button>\\n            <ion-icon name=\\\"chatbubbles-outline\\\"></ion-icon>\\n        </ion-fab-button>\\n    </ion-fab>\\n\\n\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChatListPage } from './chat-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChatListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChatListPageRoutingModule } from './chat-list-routing.module';\n\nimport { ChatListPage } from './chat-list.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ChatListPageRoutingModule\n  ],\n  declarations: [ChatListPage]\n})\nexport class ChatListPageModule {}\n","export default \".main_lbl {\\n  margin-top: 18px;\\n  margin-bottom: 18px;\\n}\\n\\n.newuser {\\n  margin-bottom: 12px;\\n}\\n\\nion-header ion-back-button {\\n  color: var(--ion-color-primary-dark);\\n}\\n\\nion-header ion-title {\\n  color: var(--ion-color-primary-dark);\\n  text-align: center;\\n  font-size: 18px;\\n  font-family: \\\"sfUi-m\\\";\\n  text-transform: capitalize;\\n}\\n\\nion-content .main_lbl {\\n  font-size: 18px;\\n  color: var(--ion-color-primary-dark);\\n  font-family: \\\"sfUi-m\\\";\\n}\\n\\nion-content .newuser {\\n  padding-left: 16px;\\n  display: -webkit-box;\\n  overflow-x: auto;\\n}\\n\\nion-content .newuser .card_div {\\n  border-radius: 5px;\\n  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.16);\\n  width: 285px;\\n  margin: 10px 20px 10px 0px;\\n}\\n\\nion-content .newuser .card_div .data_div {\\n  display: flex;\\n  padding: 15px;\\n  border-bottom: solid;\\n  border-bottom-width: 1px;\\n  border-bottom-color: var(--ion-color-silver);\\n}\\n\\nion-content .newuser .card_div .data_div img {\\n  height: 45px;\\n  width: 45px;\\n  border-radius: 50px;\\n  border: solid 3px var(--ion-color-white);\\n  box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.25);\\n}\\n\\nion-content .newuser .card_div .data_div .info_div {\\n  padding-left: 15px;\\n}\\n\\nion-content .newuser .card_div .data_div .info_div .name {\\n  font-size: 15px;\\n  color: var(--ion-color-primary-dark);\\n  font-family: \\\"sfUi-m\\\";\\n  margin-top: 3px;\\n  margin-bottom: 2px;\\n}\\n\\nion-content .newuser .card_div .data_div .info_div .ago {\\n  font-size: 12px;\\n  color: var(--ion-color-primary-light);\\n  font-family: \\\"sfUi-m\\\";\\n  margin: 0;\\n}\\n\\nion-content .newuser .card_div .detail_div {\\n  padding: 15px;\\n}\\n\\nion-content .newuser .card_div .detail_div .detail_lbl {\\n  font-size: 12px;\\n  color: var(--ion-color-primary-light);\\n  font-family: \\\"sfUi-m\\\";\\n  margin: 0;\\n}\\n\\nion-content .newuser::-webkit-scrollbar {\\n  display: none;\\n}\\n\\nion-content .info_lbl {\\n  font-size: 12px;\\n  font-family: \\\"sfUi-m\\\";\\n  color: var(--ion-color-primary-light);\\n}\\n\\nion-content .today_div {\\n  padding: 0px 16px;\\n}\\n\\nion-content .today_div ion-item {\\n  --padding-start: 0;\\n  --inner-padding-end: 0;\\n}\\n\\nion-content .today_div ion-item ion-avatar {\\n  height: 55px;\\n  width: 55px;\\n}\\n\\nion-content .today_div ion-item ion-avatar img {\\n  border: solid 3px var(--ion-color-white);\\n  box-shadow: 0px 0px 3px 0px rgba(31, 140, 237, 0.3);\\n}\\n\\nion-content .today_div ion-item .name {\\n  font-size: 15px;\\n  font-family: \\\"sfUi-m\\\";\\n  color: var(--ion-color-primary-dark);\\n}\\n\\nion-content .today_div ion-item .name span {\\n  font-size: 11px;\\n  font-family: \\\"sfUi-r\\\";\\n  color: var(--ion-color-primary-dark);\\n}\\n\\nion-content .today_div ion-item .detail {\\n  font-size: 13px;\\n  font-family: \\\"sfUi-m\\\";\\n  color: var(--ion-color-primary-light);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdmFudGFsYW1hbnRlcy9Eb2N1bWVudHMvUml6dGVrL0RldnMgQXBwcy9QRUVSUkVDT1ZFUlkvUGVlclJlY292ZXJ5QVBQL3NyYy9hcHAvcGFnZXMvY2hhdC1saXN0L2NoYXQtbGlzdC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2NoYXQtbGlzdC9jaGF0LWxpc3QucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZ0JBQUE7RUFDQSxtQkFBQTtBQ0NKOztBREVBO0VBQ0ksbUJBQUE7QUNDSjs7QURHSTtFQUNJLG9DQUFBO0FDQVI7O0FERUk7RUFDSSxvQ0FBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLHFCQUFBO0VBQ0EsMEJBQUE7QUNBUjs7QURLSTtFQUNJLGVBQUE7RUFDQSxvQ0FBQTtFQUNBLHFCQUFBO0FDRlI7O0FESUk7RUFDSSxrQkFBQTtFQUNBLG9CQUFBO0VBQ0EsZ0JBQUE7QUNGUjs7QURHUTtFQUNJLGtCQUFBO0VBQ0EsK0NBQUE7RUFDQSxZQUFBO0VBQ0EsMEJBQUE7QUNEWjs7QURFWTtFQUNJLGFBQUE7RUFDQSxhQUFBO0VBQ0Esb0JBQUE7RUFDQSx3QkFBQTtFQUNBLDRDQUFBO0FDQWhCOztBRENnQjtFQUNJLFlBQUE7RUFDQSxXQUFBO0VBQ0EsbUJBQUE7RUFDQSx3Q0FBQTtFQUNBLCtDQUFBO0FDQ3BCOztBRENnQjtFQUNJLGtCQUFBO0FDQ3BCOztBREFvQjtFQUNJLGVBQUE7RUFDQSxvQ0FBQTtFQUNBLHFCQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0FDRXhCOztBREFvQjtFQUNJLGVBQUE7RUFDQSxxQ0FBQTtFQUNBLHFCQUFBO0VBQ0EsU0FBQTtBQ0V4Qjs7QURFWTtFQUNJLGFBQUE7QUNBaEI7O0FEQ2dCO0VBQ0ksZUFBQTtFQUNBLHFDQUFBO0VBQ0EscUJBQUE7RUFDQSxTQUFBO0FDQ3BCOztBRElJO0VBQ0ksYUFBQTtBQ0ZSOztBRElJO0VBQ0ksZUFBQTtFQUNBLHFCQUFBO0VBQ0EscUNBQUE7QUNGUjs7QURJSTtFQUNJLGlCQUFBO0FDRlI7O0FER1E7RUFDSSxrQkFBQTtFQUNBLHNCQUFBO0FDRFo7O0FERVk7RUFDSSxZQUFBO0VBQ0EsV0FBQTtBQ0FoQjs7QURDZ0I7RUFDSSx3Q0FBQTtFQUNBLG1EQUFBO0FDQ3BCOztBREVZO0VBQ0ksZUFBQTtFQUNBLHFCQUFBO0VBQ0Esb0NBQUE7QUNBaEI7O0FEQ2dCO0VBQ0ksZUFBQTtFQUNBLHFCQUFBO0VBQ0Esb0NBQUE7QUNDcEI7O0FERVk7RUFDSSxlQUFBO0VBQ0EscUJBQUE7RUFDQSxxQ0FBQTtBQ0FoQiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NoYXQtbGlzdC9jaGF0LWxpc3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1haW5fbGJsIHtcclxuICAgIG1hcmdpbi10b3A6IDE4cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxOHB4O1xyXG59XHJcblxyXG4ubmV3dXNlciB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xyXG59XHJcblxyXG5pb24taGVhZGVyIHtcclxuICAgIGlvbi1iYWNrLWJ1dHRvbiB7XHJcbiAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWRhcmspO1xyXG4gICAgfVxyXG4gICAgaW9uLXRpdGxlIHtcclxuICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktZGFyayk7XHJcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcclxuICAgICAgICBmb250LWZhbWlseTogJ3NmVWktbSc7XHJcbiAgICAgICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmlvbi1jb250ZW50IHtcclxuICAgIC5tYWluX2xibCB7XHJcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1kYXJrKTtcclxuICAgICAgICBmb250LWZhbWlseTogJ3NmVWktbSc7XHJcbiAgICB9XHJcbiAgICAubmV3dXNlciB7XHJcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAxNnB4O1xyXG4gICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xyXG4gICAgICAgIG92ZXJmbG93LXg6IGF1dG87XHJcbiAgICAgICAgLmNhcmRfZGl2IHtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICBib3gtc2hhZG93OiAwcHggMXB4IDRweCAwcHggcmdiYSgwLCAwLCAwLCAwLjE2KTtcclxuICAgICAgICAgICAgd2lkdGg6IDI4NXB4O1xyXG4gICAgICAgICAgICBtYXJnaW46IDEwcHggMjBweCAxMHB4IDBweDtcclxuICAgICAgICAgICAgLmRhdGFfZGl2IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogc29saWQ7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLXdpZHRoOiAxcHg7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLWNvbG9yOiB2YXIoLS1pb24tY29sb3Itc2lsdmVyKTtcclxuICAgICAgICAgICAgICAgIGltZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0NXB4O1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NXB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBzb2xpZCAzcHggdmFyKC0taW9uLWNvbG9yLXdoaXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwcHggMHB4IDRweCAwcHggcmdiYSgwLCAwLCAwLCAwLjI1KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5pbmZvX2RpdiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgIC5uYW1lIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktZGFyayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnc2ZVaS1tJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogM3B4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZ28ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1saWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnc2ZVaS1tJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuZGV0YWlsX2RpdiB7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgICAgICAgICAgICAgLmRldGFpbF9sYmwge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktbGlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnc2ZVaS1tJztcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAubmV3dXNlcjo6LXdlYmtpdC1zY3JvbGxiYXIge1xyXG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICB9XHJcbiAgICAuaW5mb19sYmwge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgICBmb250LWZhbWlseTogJ3NmVWktbSc7XHJcbiAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWxpZ2h0KTtcclxuICAgIH1cclxuICAgIC50b2RheV9kaXYge1xyXG4gICAgICAgIHBhZGRpbmc6IDBweCAxNnB4O1xyXG4gICAgICAgIGlvbi1pdGVtIHtcclxuICAgICAgICAgICAgLS1wYWRkaW5nLXN0YXJ0OiAwO1xyXG4gICAgICAgICAgICAtLWlubmVyLXBhZGRpbmctZW5kOiAwO1xyXG4gICAgICAgICAgICBpb24tYXZhdGFyIHtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNTVweDtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA1NXB4O1xyXG4gICAgICAgICAgICAgICAgaW1nIHtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IHNvbGlkIDNweCB2YXIoLS1pb24tY29sb3Itd2hpdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAwcHggM3B4IDBweCByZ2JhKDMxLCAxNDAsIDIzNywgMC4zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAubmFtZSB7XHJcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE1cHg7XHJcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ3NmVWktbSc7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktZGFyayk7XHJcbiAgICAgICAgICAgICAgICBzcGFuIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDExcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IFwic2ZVaS1yXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWRhcmspO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5kZXRhaWwge1xyXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xyXG4gICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdzZlVpLW0nO1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWxpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi5tYWluX2xibCB7XG4gIG1hcmdpbi10b3A6IDE4cHg7XG4gIG1hcmdpbi1ib3R0b206IDE4cHg7XG59XG5cbi5uZXd1c2VyIHtcbiAgbWFyZ2luLWJvdHRvbTogMTJweDtcbn1cblxuaW9uLWhlYWRlciBpb24tYmFjay1idXR0b24ge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktZGFyayk7XG59XG5pb24taGVhZGVyIGlvbi10aXRsZSB7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1kYXJrKTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDE4cHg7XG4gIGZvbnQtZmFtaWx5OiBcInNmVWktbVwiO1xuICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTtcbn1cblxuaW9uLWNvbnRlbnQgLm1haW5fbGJsIHtcbiAgZm9udC1zaXplOiAxOHB4O1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktZGFyayk7XG4gIGZvbnQtZmFtaWx5OiBcInNmVWktbVwiO1xufVxuaW9uLWNvbnRlbnQgLm5ld3VzZXIge1xuICBwYWRkaW5nLWxlZnQ6IDE2cHg7XG4gIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICBvdmVyZmxvdy14OiBhdXRvO1xufVxuaW9uLWNvbnRlbnQgLm5ld3VzZXIgLmNhcmRfZGl2IHtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBib3gtc2hhZG93OiAwcHggMXB4IDRweCAwcHggcmdiYSgwLCAwLCAwLCAwLjE2KTtcbiAgd2lkdGg6IDI4NXB4O1xuICBtYXJnaW46IDEwcHggMjBweCAxMHB4IDBweDtcbn1cbmlvbi1jb250ZW50IC5uZXd1c2VyIC5jYXJkX2RpdiAuZGF0YV9kaXYge1xuICBkaXNwbGF5OiBmbGV4O1xuICBwYWRkaW5nOiAxNXB4O1xuICBib3JkZXItYm90dG9tOiBzb2xpZDtcbiAgYm9yZGVyLWJvdHRvbS13aWR0aDogMXB4O1xuICBib3JkZXItYm90dG9tLWNvbG9yOiB2YXIoLS1pb24tY29sb3Itc2lsdmVyKTtcbn1cbmlvbi1jb250ZW50IC5uZXd1c2VyIC5jYXJkX2RpdiAuZGF0YV9kaXYgaW1nIHtcbiAgaGVpZ2h0OiA0NXB4O1xuICB3aWR0aDogNDVweDtcbiAgYm9yZGVyLXJhZGl1czogNTBweDtcbiAgYm9yZGVyOiBzb2xpZCAzcHggdmFyKC0taW9uLWNvbG9yLXdoaXRlKTtcbiAgYm94LXNoYWRvdzogMHB4IDBweCA0cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4yNSk7XG59XG5pb24tY29udGVudCAubmV3dXNlciAuY2FyZF9kaXYgLmRhdGFfZGl2IC5pbmZvX2RpdiB7XG4gIHBhZGRpbmctbGVmdDogMTVweDtcbn1cbmlvbi1jb250ZW50IC5uZXd1c2VyIC5jYXJkX2RpdiAuZGF0YV9kaXYgLmluZm9fZGl2IC5uYW1lIHtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktZGFyayk7XG4gIGZvbnQtZmFtaWx5OiBcInNmVWktbVwiO1xuICBtYXJnaW4tdG9wOiAzcHg7XG4gIG1hcmdpbi1ib3R0b206IDJweDtcbn1cbmlvbi1jb250ZW50IC5uZXd1c2VyIC5jYXJkX2RpdiAuZGF0YV9kaXYgLmluZm9fZGl2IC5hZ28ge1xuICBmb250LXNpemU6IDEycHg7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1saWdodCk7XG4gIGZvbnQtZmFtaWx5OiBcInNmVWktbVwiO1xuICBtYXJnaW46IDA7XG59XG5pb24tY29udGVudCAubmV3dXNlciAuY2FyZF9kaXYgLmRldGFpbF9kaXYge1xuICBwYWRkaW5nOiAxNXB4O1xufVxuaW9uLWNvbnRlbnQgLm5ld3VzZXIgLmNhcmRfZGl2IC5kZXRhaWxfZGl2IC5kZXRhaWxfbGJsIHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktbGlnaHQpO1xuICBmb250LWZhbWlseTogXCJzZlVpLW1cIjtcbiAgbWFyZ2luOiAwO1xufVxuaW9uLWNvbnRlbnQgLm5ld3VzZXI6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cbmlvbi1jb250ZW50IC5pbmZvX2xibCB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgZm9udC1mYW1pbHk6IFwic2ZVaS1tXCI7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1saWdodCk7XG59XG5pb24tY29udGVudCAudG9kYXlfZGl2IHtcbiAgcGFkZGluZzogMHB4IDE2cHg7XG59XG5pb24tY29udGVudCAudG9kYXlfZGl2IGlvbi1pdGVtIHtcbiAgLS1wYWRkaW5nLXN0YXJ0OiAwO1xuICAtLWlubmVyLXBhZGRpbmctZW5kOiAwO1xufVxuaW9uLWNvbnRlbnQgLnRvZGF5X2RpdiBpb24taXRlbSBpb24tYXZhdGFyIHtcbiAgaGVpZ2h0OiA1NXB4O1xuICB3aWR0aDogNTVweDtcbn1cbmlvbi1jb250ZW50IC50b2RheV9kaXYgaW9uLWl0ZW0gaW9uLWF2YXRhciBpbWcge1xuICBib3JkZXI6IHNvbGlkIDNweCB2YXIoLS1pb24tY29sb3Itd2hpdGUpO1xuICBib3gtc2hhZG93OiAwcHggMHB4IDNweCAwcHggcmdiYSgzMSwgMTQwLCAyMzcsIDAuMyk7XG59XG5pb24tY29udGVudCAudG9kYXlfZGl2IGlvbi1pdGVtIC5uYW1lIHtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBmb250LWZhbWlseTogXCJzZlVpLW1cIjtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWRhcmspO1xufVxuaW9uLWNvbnRlbnQgLnRvZGF5X2RpdiBpb24taXRlbSAubmFtZSBzcGFuIHtcbiAgZm9udC1zaXplOiAxMXB4O1xuICBmb250LWZhbWlseTogXCJzZlVpLXJcIjtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWRhcmspO1xufVxuaW9uLWNvbnRlbnQgLnRvZGF5X2RpdiBpb24taXRlbSAuZGV0YWlsIHtcbiAgZm9udC1zaXplOiAxM3B4O1xuICBmb250LWZhbWlseTogXCJzZlVpLW1cIjtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWxpZ2h0KTtcbn0iXX0= */\"","import { Component, OnInit } from \"@angular/core\";\nimport { NavigationExtras } from \"@angular/router\";\nimport { NavController } from \"@ionic/angular\";\nimport { UserModel } from \"src/app/models/users.model\";\nimport { AuthService } from \"src/app/services/auth.service\";\nimport { ChatService } from \"src/app/services/chat.service\";\n//import { NavigationExtras } from '@angular/router';\n\nexport const snapshotToArray = (snapshot: any) => {\n  const returnArr = [];\n\n  snapshot.forEach((childSnapshot: any) => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n  });\n\n  return returnArr;\n};\nexport const snapshotToArray2 = (snapshot: any) => {\n  const returnArr = [];\n\n  snapshot.forEach((childSnapshot: any) => {\n      const item = childSnapshot.val();\n      //item.key = childSnapshot.key;\n      returnArr.push(item);\n  });\n\n  return returnArr;\n};\n\n@Component({\n  selector: \"app-chat-list\",\n  templateUrl: \"./chat-list.page.html\",\n  styleUrls: [\"./chat-list.page.scss\"],\n})\nexport class ChatListPage implements OnInit {\n  \n\n  user:UserModel;\n  users: any[] = [];\n  chats: any[] = [];\n  keysUsers: any[] = [];\n  \n\n\n\n  usersDBRef:any;\n  chatsDBRef:any;\n  constructor(private nav: NavController,\n              public chatService: ChatService,\n              private firebaseAuthService: AuthService) {\n\n    this.usersDBRef = this.firebaseAuthService.firebaseDB.collection('users');\n    this.chatsDBRef = this.firebaseAuthService.firebaseDB.collection('chats');\n\n}\n\n  ngOnInit() {\n\n\n\n    //this.user = new UserModel();\n    //this.user.ID_User = 10;\n    //this.user.Name = 'Alan Alexis';\n    //this.user.LastName = 'RamÃ­rez Lugo';\n    //this.chatService.postUser(this.user);\n\n\n    \n    //this.getUsers();\n    this.getChats2();\n  }\n  \ngetChats2(){\n  this.chatService.getChats().on('value',resp=>{\n  this.chatService.chatsUsers = [];\n  let chats = snapshotToArray(resp);\n  console.log(chats);\n  chats.forEach(chat=>{\n    if (chat.type=='single'){\n      this.chatService.getChatsMembers(chat.key).on('value', res=>{\n        let users = res.val()\n        console.log(users);\n        \n          console.log(Object.keys(users));\n          let user = Object.keys(users).filter(user => user != this.firebaseAuthService.usersign.uid)\n          let key = user[0]\n          console.log(key);\n\n\n\n          this.chatService.getUser(key).on('value', (resp)=>{\n            console.log(resp);\n            let u = resp.val()\n   \n           console.log(u);\n           this.chatService.unreadChats(chat.key).on('value', resp=>{\n       \n             let messages = snapshotToArray(resp);\n             console.log(messages);\n             let count = 0;\n             messages.forEach(message=>{\n               if ((message.sender!=this.firebaseAuthService.usersign.uid) && (message.read=='false')){\n                 count = count + 1;\n               }\n             })\n       \n             \n             console.log(count);\n             \n             u.unread = count;\n           });\n           this.chatService.chatsUsers.push(u)\n          })                \n      })\n    }else if (chat.type=='group'){\n      let groupinfo={\n        displayName: 'chatGroup',\n        photoUrl: 'https://lh3.googleusercontent.com/-oHdxefwfte4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckFwmGRYKK_yKebGqxAIor7JTeCLg/s96-c/photo.jpg',\n        uid:chat.key\n      }\n\n      this.chatService.chatsUsers.push(groupinfo)\n\n    }\n  })\n})\n\n\n\n/* \n  this.chatService.getChats().on('value', (resp:any)=>{\n    \n    let chats = snapshotToArray(resp);\n    console.log(chats);\n\n    chats.forEach(chat=>{\n      this.chatService.getChatsMembers(chat.key).on('value', (res:any)=>{\n        \n        let usersChat = res.val()\n        console.log(Object.keys(usersChat));\n\n        if (Object.keys(usersChat).length==2){\n\n          Object.keys(usersChat).forEach(key=>{\n            console.log(key);\n            if (key!='key' && key!=this.firebaseAuthService.usersign.uid){\n              this.keysUsers.push(key)\n              console.log(this.chatService.getUser(key).toJSON());\n          \n              this.chatService.getUser(key).on('value', (resp)=>{\n                console.log(resp);\n                let u = resp.val()\n       \n               console.log(u);\n               this.chatService.unreadChats(chat.key).on('value', resp=>{\n           \n                 let messages = snapshotToArray(resp);\n                 console.log(messages);\n                 let count = 0;\n                 messages.forEach(message=>{\n                   if ((message.sender!=this.firebaseAuthService.usersign.uid) && (message.read=='false')){\n                     count = count + 1;\n                   }\n                 })\n           \n                 \n                 console.log(count);\n                 \n                 u.unread = count;\n               });\n               this.chatService.chatsUsers.push(u)\n              })\n     \n            }\n          })\n\n        }else if (Object.keys(usersChat).length>2){\n\n          let groupinfo={\n            displayName: 'chatGroup',\n            photoUrl: 'https://lh3.googleusercontent.com/-oHdxefwfte4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckFwmGRYKK_yKebGqxAIor7JTeCLg/s96-c/photo.jpg',\n            uid:chat.key\n          }\n\n          this.chatService.chatsUsers.push(groupinfo)\n\n        }\n        \n   \n      })\n    })\n\n  }) */\n}\n\ngetChats(){\n/*   this.chatsDBRef.onSnapshot(  snap =>{\n    this.chats = [];\n    snap.forEach( snapHijo =>{\n        this.chats.push({\n            id: snapHijo.id,\n            ...snapHijo.data()\n        })\n    });\n    console.log(this.chats);\n  }); */\n  \n\n  this.chatService.getUserChats().orderByChild(this.firebaseAuthService.usersign.uid).equalTo('true').on('value', (resp:any) =>{\n  let chats = snapshotToArray(resp);\n  this.chats = [];\n  this.keysUsers = []\n  this.chatService.chatsUsers = []\n  \n   console.log(this.chats);\n\n   chats.forEach(chat=>{\n     console.log(Object.keys(chat))\n     Object.keys(chat).forEach(key=>{\n       if (key!='key' && key!=this.firebaseAuthService.usersign.uid){\n         this.keysUsers.push(key)\n         console.log(this.chatService.getUser(key).toJSON());\n     \n         this.chatService.getUser(key).on('value', (resp)=>{\n           console.log(resp);\n           let u = resp.val()\n           \n          /* let users = snapshotToArray(resp); */\n          /* console.log(users); */\n          console.log(chat);\n          this.chatService.unreadChats(chat.key).on('value', resp=>{\n      \n            let messages = snapshotToArray(resp);\n            console.log(messages);\n            let count = 0;\n            messages.forEach(message=>{\n              if ((message.sender!=this.firebaseAuthService.usersign.uid) && (message.read=='false')){\n                count = count + 1;\n              }\n            })\n      \n            \n            console.log(count);\n            \n            u.unread = count;\n          });\n          this.chatService.chatsUsers.push(u)\n         })\n\n       }\n\n     \n       \n\n\n     })\n\n\n   })\n\n/*    console.log(this.keysUsers);\n\n   this.keysUsers.forEach(keyUser=>{\n\n    console.log(this.chatService.getUser(keyUser).toJSON());\n     \n     this.chatService.getUser(keyUser).on('value', (resp)=>{\n       console.log(resp);\n       let u = resp.val()\n\n       this.chatService.chatsUsers.push(u)\n     })\n   }) */\n\n   console.log(this.chatService.chatsUsers);\n\n\n  \n  })\n\n\n}\n\n\n\n\n\n\n  getUsers(){\n    /*   this.usersDBRef.onSnapshot(  snap =>{\n        this.users = [];\n        snap.forEach( snapHijo =>{\n            this.users.push({\n                id: snapHijo.id,\n                ...snapHijo.data()\n            })\n        });\n        console.log(this.users);\n      }); */\n  }\n\n\n\n\n\n\n\n\n\n  /*setLastHourForBets(){\n    this.chatService.getUsers();\n\n    this.chatService.getUsers().subscribe(message => {\n      console.log(message);\n    });\n  }*/\n\n\n  openUsersPage() {\n    this.nav.navigateForward(\"/chat-users-list\");\n  }\n\n  openChat(chat){\n    console.log(chat);\n/* \n    let navigationExtras: NavigationExtras = {\n      queryParams: {\n        special: JSON.stringify( {\n                                    ID_Chat: chat.id\n                                 } \n        )\n      }\n    }; */\n    if (chat.displayName!='chatGroup'){\n\n      this.chatService.getChat().orderByChild(chat.uid).equalTo('true').on('value', (resp:any) =>{\n        console.log(resp);\n        const chats = snapshotToArray(resp);\n        console.log(chats);\n        \n          //this.nav.navigateForward(\"/chat\");\n          //this.nav.navigateForward(\"/chat?id=\"+chats[0].uid);\n          localStorage.setItem('user2',JSON.stringify(chat))\n          localStorage.setItem('idchat', chats[0].key)\n          this.nav.navigateForward(\"/chat\");\n       \n      })\n    }else{\n    /*   console.log(this.users);\n      this.groupusers = this.users.filter(x => x.isChecked != false && x.isChecked);\n      console.log(this.groupusers);\n      let group = {\n        displayName: 'chatGroup'\n      } */\n  \n  \n      localStorage.setItem('users2',JSON.stringify(chat))\n      //let idchat = this.chatService.newChatGroup(this.groupusers);\n      localStorage.setItem('idchat', chat.uid)\n      this.nav.navigateForward(\"/chat\");\n    }\n\n   \n\n   \n\n\n\n    //this.nav.navigateForward(\"/chat\");\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { UserModel } from '../models/users.model';\n\nimport { AuthService } from './auth.service';\n\nimport { Observable, Subject } from 'rxjs';\nimport { of } from 'rxjs';\nimport firebase from 'firebase';\n//import { UserModel } from 'app/models/users.model';\n\nconst snapshotToArray = (snapshot: any) => {\n  const returnArr = [];\n\n  snapshot.forEach((childSnapshot: any) => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n  });\n\n  return returnArr;\n};\nconst snapshotToArray2 = (snapshot: any) => {\n  const returnArr = [];\n\n  snapshot.forEach((childSnapshot: any) => {\n      const item = childSnapshot.val();\n      /* item.key = childSnapshot.key; */\n      returnArr.push(item);\n  });\n\n  return returnArr;\n};\n\n@Injectable({\n  providedIn: 'root'\n})\n\n\n\nexport class ChatService {\n   \n  private subject = new Subject<any>();\n  public chatsUsers: any[] = [];\n\n  usersDBRef:any;\n  users: any[] = [];\n\n  public myObservable$: Observable<any>;\n\n  constructor(private firebaseAuthService: AuthService) { \n    //this.usersDBRef = this.firebaseAuthService.firebaseDB.collection('users');\n\n\n\n//    this.myObservable$ = this.usersDBRef.onSnapshot();\n\n  //  console.log(this.myObservable$);\n   }\n\n\n /*   postUser(user:UserModel){\n      \n      this.usersDBRef\n      .add(Object.assign({}, user)).then(docRef=>{\n          console.log(docRef);\n      }).catch(e=> console.log(\"error: \"+ e));\n   } */\n\n /*getUsers(){\n  this.usersDBRef.onSnapshot(  snap =>{\n    snap.forEach( snapHijo =>{\n        this.users.push({\n            id: snapHijo.id,\n            ...snapHijo.data()\n        })\n    });\n  });\n }*/\n\n\n  getUserChats(){\n\n    return firebase.database().ref(this.firebaseAuthService.usersign.uid+'/members/');\n\n    //return this.afDB.object('cliente/').valueChanges()\n\n  }\n\n  getChatsMembers(idchat){\n    return firebase.database().ref(this.firebaseAuthService.usersign.uid+'/members/'+idchat);\n  }\n\n  getChats(){\n    return firebase.database().ref(this.firebaseAuthService.usersign.uid+'/chats/');\n  }\n\n  getUser(uid){\n    return firebase.database().ref('Users/'+uid);\n  }\n\n  getUsers(){\n    return firebase.database().ref('Users/');\n  }\n\n  getChat(){\n    return firebase.database().ref(this.firebaseAuthService.usersign.uid+'/members/');\n  }\n\n  getMessages(chatid){\n    return firebase.database().ref(this.firebaseAuthService.usersign.uid+'/messages/'+chatid);\n  }\n\n  newChat(user){\n\n    //let key = this.afDB.list('/cliente/').push(cliente).key;\n\n    let chat = {\n      timestamp: new Date(),\n      type: 'single'\n    }\n\n   \n\n    \n\n    let key  = firebase.database().ref(this.firebaseAuthService.usersign.uid+'/chats/').push(chat).key;\n    firebase.database().ref(user.uid+'/chats/'+key).set(chat);        \n    firebase.database().ref('/chats/'+key).set(chat);\n    \n\n    firebase.database().ref(this.firebaseAuthService.usersign.uid+'/members/'+key+'/'+user.uid).set('true');\n    firebase.database().ref(this.firebaseAuthService.usersign.uid+'/members/'+key+'/'+this.firebaseAuthService.usersign.uid).set('true');\n    \n\n    firebase.database().ref(user.uid+'/members/'+key+'/'+user.uid).set('true');\n    firebase.database().ref(user.uid+'/members/'+key+'/'+this.firebaseAuthService.usersign.uid).set('true');\n    firebase.database().ref('/members/'+key+'/'+user.uid).set('true');\n    firebase.database().ref('/members/'+key+'/'+this.firebaseAuthService.usersign.uid).set('true');\n\n    return key;\n  }\n\n  newMessage(message){\n\n    console.log(message);\n    let user2 = JSON.parse(localStorage.getItem('user2'))\n\n    firebase.database().ref(this.firebaseAuthService.usersign.uid+'/messages/'+localStorage.getItem('idchat')).push(message);\n    firebase.database().ref(user2.uid+'/messages/'+localStorage.getItem('idchat')).push(message);\n    firebase.database().ref('/messages/'+localStorage.getItem('idchat')).push(message);\n\n    \n  }\n  newMessageGroup(message, idchat){\n\n    console.log(message);\n    let user2 = JSON.parse(localStorage.getItem('user2'))\n\n    firebase.database().ref(this.firebaseAuthService.usersign.uid+'/messages/'+localStorage.getItem('idchat')).push(message);\n    firebase.database().ref('/messages/'+localStorage.getItem('idchat')).push(message);\n\n    \n    firebase.database().ref('/members/').orderByKey().equalTo(idchat).on('value',resp=>{\n      let users = snapshotToArray2(resp)\n      console.log(users);\n      users.forEach(user=>{\n        console.log(user);\n\n        let keyusers = Object.keys(user).filter(key=>key != this.firebaseAuthService.usersign.uid && key != 'key')\n        console.log(keyusers);\n        keyusers.forEach(keyuser=>{\n        firebase.database().ref(keyuser+'/messages/'+localStorage.getItem('idchat')).push(message);\n\n        })\n      })\n    })\n\n\n    \n\n    \n  }\n\n\n  readChats(){\n\n    let chatid = localStorage.getItem('idchat')\n\n    firebase.database().ref(this.firebaseAuthService.usersign.uid+'/messages/'+chatid).once('value', resp=>{\n      \n      let messages = snapshotToArray(resp);\n      console.log(messages);\n\n      messages.forEach(message=>{\n        if (message.sender!=this.firebaseAuthService.usersign.uid){\n          firebase.database().ref(this.firebaseAuthService.usersign.uid+'/messages/'+chatid+'/'+message.key+'/read').set('true');\n        }\n      })\n\n    });\n\n  }\n\n  stopread(){\n    console.log('stop read');\n\n    let chatid = localStorage.getItem('idchat')\n\n    firebase.database().ref(this.firebaseAuthService.usersign.uid+'/messages/').off();\n\n  }\n\n  unreadChats(chatid){\n\n    let count = 0;\n\n    return firebase.database().ref(this.firebaseAuthService.usersign.uid+'/messages/'+chatid)\n    \n    \n   /*  .on('value', resp=>{\n      \n      let messages = snapshotToArray(resp);\n      console.log(messages);\n\n      messages.forEach(message=>{\n        if ((message.sender!=this.firebaseAuthService.usersign.uid) && (message.read=='false')){\n          count = count + 1;\n        }\n      })\n\n      \n      console.log(count);\n    }); */\n \n\n  }\n\n  newChatGroup(users){\n\n    //let key = this.afDB.list('/cliente/').push(cliente).key;\n\n    let chat = {\n      timestamp: new Date(),\n      type: 'group'\n    }\n\n    console.log(users);\n\n    /* agregar al chat */\n    \n\n   \n\n    \n\n    let key  = firebase.database().ref(this.firebaseAuthService.usersign.uid+'/chats/').push(chat).key;            \n    firebase.database().ref('/chats/'+key).set(chat);\n    \n\n    \n    firebase.database().ref(this.firebaseAuthService.usersign.uid+'/members/'+key+'/'+this.firebaseAuthService.usersign.uid).set('true');\n    firebase.database().ref('/members/'+key+'/'+this.firebaseAuthService.usersign.uid).set('true');\n    \n/* users */\nusers.forEach(user=>{\n\n  firebase.database().ref(user.uid+'/members/'+key+'/'+user.uid).set('true');\n  firebase.database().ref(user.uid+'/members/'+key+'/'+this.firebaseAuthService.usersign.uid).set('true');\n  firebase.database().ref('/members/'+key+'/'+user.uid).set('true');\n\n\n  firebase.database().ref(this.firebaseAuthService.usersign.uid+'/members/'+key+'/'+user.uid).set('true');\n\n  firebase.database().ref(user.uid+'/chats/'+key).set(chat);\n})\n\n    return key;\n  }\n\n /*  newChat2(user,idchat){\n\n    //let key = this.afDB.list('/cliente/').push(cliente).key;\n\n    let chat = {\n      timestamp: new Date(),\n      type: 'single'\n    }\n\n   \n\n    console.log(user);\n\n    let key  = idchat;\n  \n    \n\n    return key;\n  } */\n\n\n\n\n       \n\n\n\n\n\n\n\n\n\n\n\n}\n\n\n\n\n\n"],"sourceRoot":"webpack:///","file":"pages-chat-list-chat-list-module-es5.js"}