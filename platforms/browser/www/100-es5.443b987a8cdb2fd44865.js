function _defineProperties(n,t){for(var l=0;l<t.length;l++){var e=t[l];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function _createClass(n,t,l){return t&&_defineProperties(n.prototype,t),l&&_defineProperties(n,l),n}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{HPQy:function(n,t,l){"use strict";l.r(t);var e=l("8Y7J"),o=function n(){_classCallCheck(this,n)},i=l("pMnS"),c=l("MKJQ"),a=l("sZkV"),r=l("SVse"),u=l("lGQG"),s=l("sjK5"),g=function(n){var t=[];return n.forEach((function(n){var l=n.val();l.key=n.key,t.push(l)})),t},d=function(){function n(t,l,e){_classCallCheck(this,n),this.nav=t,this.chatService=l,this.firebaseAuthService=e,this.users=[],this.chats=[],this.keysUsers=[],this.usersDBRef=this.firebaseAuthService.firebaseDB.collection("users"),this.chatsDBRef=this.firebaseAuthService.firebaseDB.collection("chats")}return _createClass(n,[{key:"ngOnInit",value:function(){this.getChats2()}},{key:"getChats2",value:function(){var n=this;this.chatService.getChats().on("value",(function(t){n.chatService.chatsUsers=[];var l=g(t);console.log(l),l.forEach((function(t){"single"==t.type?n.chatService.getChatsMembers(t.key).on("value",(function(l){var e=l.val();console.log(e),console.log(Object.keys(e));var o=Object.keys(e).filter((function(t){return t!=n.firebaseAuthService.usersign.uid}))[0];console.log(o),n.chatService.getUser(o).on("value",(function(l){console.log(l);var e=l.val();console.log(e),n.chatService.unreadChats(t.key).on("value",(function(t){var l=g(t);console.log(l);var o=0;l.forEach((function(t){t.sender!=n.firebaseAuthService.usersign.uid&&"false"==t.read&&(o+=1)})),console.log(o),e.unread=o})),n.chatService.chatsUsers.push(e)}))})):"group"==t.type&&n.chatService.chatsUsers.push({displayName:"chatGroup",photoUrl:"https://lh3.googleusercontent.com/-oHdxefwfte4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckFwmGRYKK_yKebGqxAIor7JTeCLg/s96-c/photo.jpg",uid:t.key})}))}))}},{key:"getChats",value:function(){var n=this;this.chatService.getUserChats().orderByChild(this.firebaseAuthService.usersign.uid).equalTo("true").on("value",(function(t){var l=g(t);n.chats=[],n.keysUsers=[],n.chatService.chatsUsers=[],console.log(n.chats),l.forEach((function(t){console.log(Object.keys(t)),Object.keys(t).forEach((function(l){"key"!=l&&l!=n.firebaseAuthService.usersign.uid&&(n.keysUsers.push(l),console.log(n.chatService.getUser(l).toJSON()),n.chatService.getUser(l).on("value",(function(l){console.log(l);var e=l.val();console.log(t),n.chatService.unreadChats(t.key).on("value",(function(t){var l=g(t);console.log(l);var o=0;l.forEach((function(t){t.sender!=n.firebaseAuthService.usersign.uid&&"false"==t.read&&(o+=1)})),console.log(o),e.unread=o})),n.chatService.chatsUsers.push(e)})))}))})),console.log(n.chatService.chatsUsers)}))}},{key:"getUsers",value:function(){}},{key:"openUsersPage",value:function(){this.nav.navigateForward("/chat-users-list")}},{key:"openChat",value:function(n){var t=this;console.log(n),"chatGroup"!=n.displayName?this.chatService.getChat().orderByChild(n.uid).equalTo("true").on("value",(function(l){console.log(l);var e=g(l);console.log(e),localStorage.setItem("user2",JSON.stringify(n)),localStorage.setItem("idchat",e[0].key),t.nav.navigateForward("/chat")})):(localStorage.setItem("users2",JSON.stringify(n)),localStorage.setItem("idchat",n.uid),this.nav.navigateForward("/chat"))}}]),n}(),b=e.ob({encapsulation:0,styles:[[".main_lbl[_ngcontent-%COMP%]{margin-top:18px;margin-bottom:18px}.newuser[_ngcontent-%COMP%]{margin-bottom:12px}ion-header[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{color:var(--ion-color-primary-dark)}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:var(--ion-color-primary-dark);text-align:center;font-size:18px;font-family:sfUi-m;text-transform:capitalize}ion-content[_ngcontent-%COMP%]   .main_lbl[_ngcontent-%COMP%]{font-size:18px;color:var(--ion-color-primary-dark);font-family:sfUi-m}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]{padding-left:16px;display:-webkit-box;overflow-x:auto}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 1px 4px 0 rgba(0,0,0,.16);width:285px;margin:10px 20px 10px 0}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]{display:flex;padding:15px;border-bottom:1px solid;border-bottom-color:var(--ion-color-silver)}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:45px;width:45px;border-radius:50px;border:solid 3px var(--ion-color-white);box-shadow:0 0 4px 0 rgba(0,0,0,.25)}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]   .info_div[_ngcontent-%COMP%]{padding-left:15px}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]   .info_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:15px;color:var(--ion-color-primary-dark);font-family:sfUi-m;margin-top:3px;margin-bottom:2px}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .data_div[_ngcontent-%COMP%]   .info_div[_ngcontent-%COMP%]   .ago[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-primary-light);font-family:sfUi-m;margin:0}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .detail_div[_ngcontent-%COMP%]{padding:15px}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .detail_div[_ngcontent-%COMP%]   .detail_lbl[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-primary-light);font-family:sfUi-m;margin:0}ion-content[_ngcontent-%COMP%]   .newuser[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}ion-content[_ngcontent-%COMP%]   .info_lbl[_ngcontent-%COMP%]{font-size:12px;font-family:sfUi-m;color:var(--ion-color-primary-light)}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]{padding:0 16px}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:0;--inner-padding-end:0}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{height:55px;width:55px}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:solid 3px var(--ion-color-white);box-shadow:0 0 3px 0 rgba(31,140,237,.3)}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:15px;font-family:sfUi-m;color:var(--ion-color-primary-dark)}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;font-family:sfUi-r;color:var(--ion-color-primary-dark)}ion-content[_ngcontent-%COMP%]   .today_div[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{font-size:13px;font-family:sfUi-m;color:var(--ion-color-primary-light)}"]],data:{}});function h(n){return e.Lb(0,[(n()(),e.qb(0,0,null,null,12,"ion-item",[["lines","full"],["mode","md"]],null,[[null,"click"]],(function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.openChat(n.context.$implicit)&&e),e}),c.cb,c.r)),e.pb(1,49152,null,0,a.H,[e.h,e.k,e.x],{lines:[0,"lines"],mode:[1,"mode"]},null),(n()(),e.qb(2,0,null,0,2,"ion-avatar",[["slot","start"]],null,null,null,c.M,c.b)),e.pb(3,49152,null,0,a.f,[e.h,e.k,e.x],null,null),(n()(),e.qb(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),e.qb(5,0,null,0,4,"ion-label",[],null,null,null,c.db,c.s)),e.pb(6,49152,null,0,a.N,[e.h,e.k,e.x],null,null),(n()(),e.qb(7,0,null,0,2,"h3",[["class","name"]],null,null,null,null,null)),(n()(),e.Jb(8,null,[""," "])),(n()(),e.qb(9,0,null,null,0,"span",[["class","ion-float-right"]],null,null,null,null,null)),(n()(),e.qb(10,0,null,0,2,"ion-badge",[["color","primary"]],null,null,null,c.O,c.d)),e.pb(11,49152,null,0,a.j,[e.h,e.k,e.x],{color:[0,"color"]},null),(n()(),e.Jb(12,0,["",""]))],(function(n,t){n(t,1,0,"full","md"),n(t,11,0,"primary")}),(function(n,t){n(t,4,0,null==t.context.$implicit?null:t.context.$implicit.photoUrl),n(t,8,0,null==t.context.$implicit?null:t.context.$implicit.displayName),n(t,12,0,null==t.context.$implicit?null:t.context.$implicit.unread)}))}function f(n){return e.Lb(0,[(n()(),e.qb(0,0,null,null,15,"ion-header",[["class","ion-no-border"]],null,null,null,c.Z,c.o)),e.pb(1,49152,null,0,a.B,[e.h,e.k,e.x],null,null),(n()(),e.qb(2,0,null,0,13,"ion-toolbar",[["mode","md"]],null,null,null,c.vb,c.K)),e.pb(3,49152,null,0,a.zb,[e.h,e.k,e.x],{mode:[0,"mode"]},null),(n()(),e.qb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,c.Q,c.f)),e.pb(5,49152,null,0,a.l,[e.h,e.k,e.x],null,null),(n()(),e.qb(6,0,null,0,2,"ion-back-button",[["defaultHref","home"],["icon","chevron-back-outline"],["mode","md"],["text",""]],null,[[null,"click"]],(function(n,t,l){var o=!0;return"click"===t&&(o=!1!==e.Bb(n,8).onClick(l)&&o),o}),c.N,c.c)),e.pb(7,49152,null,0,a.g,[e.h,e.k,e.x],{defaultHref:[0,"defaultHref"],icon:[1,"icon"],mode:[2,"mode"],text:[3,"text"]},null),e.pb(8,16384,null,0,a.h,[[2,a.fb],a.Fb],{defaultHref:[0,"defaultHref"]},null),(n()(),e.qb(9,0,null,0,3,"ion-buttons",[["slot","end"]],null,null,null,c.Q,c.f)),e.pb(10,49152,null,0,a.l,[e.h,e.k,e.x],null,null),(n()(),e.qb(11,0,null,0,1,"ion-menu-button",[],null,null,null,c.gb,c.w)),e.pb(12,49152,null,0,a.R,[e.h,e.k,e.x],null,null),(n()(),e.qb(13,0,null,0,2,"ion-title",[],null,null,null,c.tb,c.I)),e.pb(14,49152,null,0,a.xb,[e.h,e.k,e.x],null,null),(n()(),e.Jb(-1,0,["chat"])),(n()(),e.qb(16,0,null,null,12,"ion-content",[["class","ion-padding-bottom"]],null,null,null,c.U,c.j)),e.pb(17,49152,null,0,a.u,[e.h,e.k,e.x],null,null),(n()(),e.qb(18,0,null,0,1,"h3",[["class","main_lbl ion-padding-start"]],null,null,null,null,null)),(n()(),e.Jb(-1,null,["Chats"])),(n()(),e.qb(20,0,null,0,2,"div",[["class","today_div"]],null,null,null,null,null)),(n()(),e.fb(16777216,null,null,1,null,h)),e.pb(22,278528,null,0,r.i,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.qb(23,0,null,0,5,"ion-fab",[["horizontal","end"],["slot","fixed"],["vertical","bottom"]],null,[[null,"click"]],(function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.openUsersPage()&&e),e}),c.X,c.l)),e.pb(24,49152,null,0,a.w,[e.h,e.k,e.x],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),e.qb(25,0,null,0,3,"ion-fab-button",[],null,null,null,c.W,c.m)),e.pb(26,49152,null,0,a.x,[e.h,e.k,e.x],null,null),(n()(),e.qb(27,0,null,0,1,"ion-icon",[["name","chatbubbles-outline"]],null,null,null,c.ab,c.p)),e.pb(28,49152,null,0,a.C,[e.h,e.k,e.x],{name:[0,"name"]},null)],(function(n,t){var l=t.component;n(t,3,0,"md"),n(t,7,0,"home","chevron-back-outline","md",""),n(t,8,0,"home"),n(t,22,0,l.chatService.chatsUsers),n(t,24,0,"end","bottom"),n(t,28,0,"chatbubbles-outline")}),null)}var p=e.mb("app-chat-list",d,(function(n){return e.Lb(0,[(n()(),e.qb(0,0,null,null,1,"app-chat-list",[],null,null,null,f,b)),e.pb(1,114688,null,0,d,[a.Fb,s.a,u.a],null,null)],(function(n,t){n(t,1,0)}),null)}),{},{},[]),v=l("s7LF"),_=l("iInd"),m=function n(){_classCallCheck(this,n)};l.d(t,"ChatListPageModuleNgFactory",(function(){return C}));var C=e.nb(o,[],(function(n){return e.yb([e.zb(512,e.j,e.Y,[[8,[i.a,p]],[3,e.j],e.v]),e.zb(4608,r.l,r.k,[e.s,[2,r.r]]),e.zb(4608,v.o,v.o,[]),e.zb(4608,a.b,a.b,[e.x,e.g]),e.zb(4608,a.Eb,a.Eb,[a.b,e.j,e.p]),e.zb(4608,a.Hb,a.Hb,[a.b,e.j,e.p]),e.zb(1073742336,r.b,r.b,[]),e.zb(1073742336,v.n,v.n,[]),e.zb(1073742336,v.e,v.e,[]),e.zb(1073742336,a.Bb,a.Bb,[]),e.zb(1073742336,_.o,_.o,[[2,_.t],[2,_.m]]),e.zb(1073742336,m,m,[]),e.zb(1073742336,o,o,[]),e.zb(1024,_.k,(function(){return[[{path:"",component:d}]]}),[])])}))}}]);