{"version":3,"sources":["./src/app/pages/chat/chat.page.html","./src/app/pages/chat/chat-routing.module.ts","./src/app/pages/chat/chat.module.ts","./src/app/pages/chat/chat.page.scss","./src/app/pages/chat/chat.page.ts"],"names":[],"mappings":"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","file":"pages-chat-chat-module-es2015.js","sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\n    <ion-toolbar mode=\\\"md\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"chatList\\\" icon=\\\"chevron-back-outline\\\" text=\\\"\\\" mode=\\\"md\\\" (click)=\\\"goToChatList()\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-menu-button></ion-menu-button>\\n        </ion-buttons>\\n        <ion-title>chat</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n<ion-header>\\n    <ion-title>{{this.chatUser.displayName}}</ion-title>\\n    <!--   <ion-avatar style=\\\"display: block !important; padding-left: 10px;\\\" slot=\\\"end\\\">\\n        <img [src]=\\\"this.chatUser.photoUrl\\\">\\n\\n    </ion-avatar> -->\\n</ion-header>\\n<hr>\\n<ion-content #chatcontent [scrollEvents]=\\\"true\\\" class=\\\"ion-padding-horizontal\\\">\\n    <div *ngFor=\\\"let message of chatMessages\\\">\\n\\n\\n        <div *ngIf=\\\"message.sender != this.firebaseAuthService.usersign.uid\\\" class=\\\"chat_div \\\">\\n            <!-- Others messages -->\\n            <!-- Other person message -->\\n            <!-- <img src=\\\"../../../assets/image/patricia.png \\\"> -->\\n            <div class=\\\"message_div \\\">\\n                <div class=\\\"chat \\\">\\n                    <p class=\\\"chat_lbl \\\">{{message.message}}</p>\\n                </div>\\n                <p class=\\\"time \\\">{{message.timestamp.seconds * 1000| date: 'dd/MM/yy h:mm a'}}</p>\\n            </div>\\n        </div>\\n        <div *ngIf=\\\"message.sender == this.firebaseAuthService.usersign.uid\\\" class=\\\"chat_div replay_div \\\">\\n            <!-- My messages -->\\n            <!-- Me -->\\n            <div class=\\\"message_div \\\">\\n                <div class=\\\"chat \\\">\\n                    <p class=\\\"chat_lbl \\\">{{message.message}}</p>\\n                </div>\\n                <p class=\\\"time \\\">{{message.timestamp.seconds * 1000| date: 'dd/MM/yy h:mm a'}}</p>\\n\\n            </div>\\n            <!-- <img src=\\\"../../../assets/image/patricia.png \\\"> -->\\n        </div>\\n\\n    </div>\\n\\n\\n\\n\\n\\n\\n\\n</ion-content>\\n<ion-footer class=\\\"ion-no-border \\\">\\n    <ion-item mode=\\\"md\\\" lines=\\\"none \\\">\\n        <ion-input style=\\\"font-size: 20px !important;\\\" [(ngModel)]=\\\"message\\\" placeholder=\\\"Type your message... \\\" (keypress)=\\\"eventoMensaje($event.keyCode)\\\">\\n        </ion-input>\\n    </ion-item>\\n    <ion-button class=\\\"send_btn\\\" (click)=\\\"sendMessage()\\\">\\n        <ion-icon src=\\\"../../../assets/image_icon/send.svg \\\"></ion-icon>\\n    </ion-button>\\n\\n</ion-footer>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChatPage } from './chat.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChatPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChatPageRoutingModule } from './chat-routing.module';\n\nimport { ChatPage } from './chat.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ChatPageRoutingModule\n  ],\n  declarations: [ChatPage]\n})\nexport class ChatPageModule {}\n","export default \"ion-header ion-back-button {\\n  color: var(--blue);\\n}\\nion-header ion-title {\\n  color: var(--blue);\\n  text-align: center;\\n  font-size: 18px;\\n  font-family: \\\"sf_ui_sb\\\";\\n  text-transform: capitalize;\\n}\\nion-content .td_lbl {\\n  font-size: 12px;\\n  color: var(--blue);\\n  font-family: \\\"sf_ui_md\\\";\\n  text-align: center;\\n  margin-top: 12px;\\n  margin-bottom: 12px;\\n}\\nion-content .chat_div {\\n  display: flex;\\n  margin-bottom: 20px;\\n  align-items: center;\\n}\\nion-content .chat_div img {\\n  height: 57px;\\n  width: 57px;\\n  border-radius: 50%;\\n  border: solid 3px var(--white);\\n  box-shadow: 0px 0px 5px 0px rgba(31, 140, 237, 0.25);\\n}\\nion-content .chat_div .message_div .chat {\\n  width: 230px;\\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.3);\\n  padding: 15px;\\n  margin-left: 15px;\\n  border-radius: 5px;\\n}\\nion-content .chat_div .message_div .chat .chat_lbl {\\n  font-size: 14px;\\n  color: var(--blue);\\n  font-family: \\\"sf_ui_md_i\\\";\\n  margin-top: 0;\\n  margin-bottom: 5px;\\n}\\nion-content .chat_div .time {\\n  font-size: 12px;\\n  color: var(--lht_blue);\\n  font-family: \\\"sf_ui_md\\\";\\n  margin-top: 8px;\\n  margin-bottom: 0;\\n  text-align: end;\\n}\\nion-content .replay_div {\\n  display: flex;\\n  justify-content: flex-end;\\n}\\nion-content .replay_div .message_div .chat {\\n  width: 250px;\\n  margin-right: 15px;\\n  margin-left: 0;\\n  background-color: var(--my_theme);\\n  box-shadow: none;\\n}\\nion-content .replay_div .message_div .chat .chat_lbl {\\n  color: var(--white);\\n}\\nion-content .replay_div .time {\\n  text-align: start;\\n}\\nion-footer {\\n  display: flex;\\n  justify-content: space-between;\\n  box-shadow: 0px -1px 6px 0px rgba(0, 0, 0, 0.2);\\n}\\nion-footer ion-item {\\n  width: 100%;\\n}\\nion-footer ion-item ion-input {\\n  font-size: 12px;\\n  font-family: \\\"rubik_i\\\";\\n  color: var(--gray);\\n}\\nion-footer .send_btn {\\n  height: 50px;\\n  width: 50px;\\n  --background: var(--my_theme);\\n  margin: 0;\\n  --border-radius: 0px;\\n  min-width: 50px;\\n  --padding-start: 0;\\n  --padding-end: 0;\\n}\\nion-footer .send_btn ion-icon {\\n  width: 27px;\\n  height: 27px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdmFudGFsYW1hbnRlcy9Eb2N1bWVudHMvUml6dGVrL0RldnMgQXBwcy9QRUVSUkVDT1ZFUlkvUGVlclJlY292ZXJ5QVBQL3NyYy9hcHAvcGFnZXMvY2hhdC9jaGF0LnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvY2hhdC9jaGF0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNJLGtCQUFBO0FDQVI7QURFSTtFQUNJLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsdUJBQUE7RUFDQSwwQkFBQTtBQ0FSO0FES0k7RUFDSSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSx1QkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtBQ0ZSO0FESUk7RUFDSSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtBQ0ZSO0FER1E7RUFDSSxZQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0VBQ0EsOEJBQUE7RUFDQSxvREFBQTtBQ0RaO0FESVk7RUFDSSxZQUFBO0VBQ0EsOENBQUE7RUFDQSxhQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtBQ0ZoQjtBREdnQjtFQUNJLGVBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0FDRHBCO0FES1E7RUFDSSxlQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGVBQUE7QUNIWjtBRE1JO0VBQ0ksYUFBQTtFQUNBLHlCQUFBO0FDSlI7QURNWTtFQUNJLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGNBQUE7RUFDQSxpQ0FBQTtFQUNBLGdCQUFBO0FDSmhCO0FES2dCO0VBQ0ksbUJBQUE7QUNIcEI7QURPUTtFQUNJLGlCQUFBO0FDTFo7QURVQTtFQUNJLGFBQUE7RUFDQSw4QkFBQTtFQUNBLCtDQUFBO0FDUEo7QURRSTtFQUNJLFdBQUE7QUNOUjtBRE9RO0VBQ0ksZUFBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7QUNMWjtBRFFJO0VBQ0ksWUFBQTtFQUNBLFdBQUE7RUFDQSw2QkFBQTtFQUNBLFNBQUE7RUFDQSxvQkFBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0FDTlI7QURPUTtFQUNJLFdBQUE7RUFDQSxZQUFBO0FDTFoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9jaGF0L2NoYXQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWhlYWRlciB7XHJcbiAgICBpb24tYmFjay1idXR0b24ge1xyXG4gICAgICAgIGNvbG9yOiB2YXIoLS1ibHVlKTtcclxuICAgIH1cclxuICAgIGlvbi10aXRsZSB7XHJcbiAgICAgICAgY29sb3I6IHZhcigtLWJsdWUpO1xyXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgICAgICAgZm9udC1mYW1pbHk6IFwic2ZfdWlfc2JcIjtcclxuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTtcclxuICAgIH1cclxufVxyXG5cclxuaW9uLWNvbnRlbnQge1xyXG4gICAgLnRkX2xibCB7XHJcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgICAgIGNvbG9yOiB2YXIoLS1ibHVlKTtcclxuICAgICAgICBmb250LWZhbWlseTogXCJzZl91aV9tZFwiO1xyXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICBtYXJnaW4tdG9wOiAxMnB4O1xyXG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XHJcbiAgICB9XHJcbiAgICAuY2hhdF9kaXYge1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgIGltZyB7XHJcbiAgICAgICAgICAgIGhlaWdodDogNTdweDtcclxuICAgICAgICAgICAgd2lkdGg6IDU3cHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgICAgICAgICAgYm9yZGVyOiBzb2xpZCAzcHggdmFyKC0td2hpdGUpO1xyXG4gICAgICAgICAgICBib3gtc2hhZG93OiAwcHggMHB4IDVweCAwcHggcmdiYSgzMSwgMTQwLCAyMzcsIDAuMjUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAubWVzc2FnZV9kaXYge1xyXG4gICAgICAgICAgICAuY2hhdCB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMjMwcHg7XHJcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwcHggMHB4IDNweCAwcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTVweDtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICAgICAgLmNoYXRfbGJsIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWJsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBcInNmX3VpX21kX2lcIjtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAudGltZSB7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgICAgICAgY29sb3I6IHZhcigtLWxodF9ibHVlKTtcclxuICAgICAgICAgICAgZm9udC1mYW1pbHk6IFwic2ZfdWlfbWRcIjtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xyXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBlbmQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLnJlcGxheV9kaXYge1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxuICAgICAgICAubWVzc2FnZV9kaXYge1xyXG4gICAgICAgICAgICAuY2hhdCB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMjUwcHg7XHJcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XHJcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMDtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW15X3RoZW1lKTtcclxuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICAuY2hhdF9sYmwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS13aGl0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLnRpbWUge1xyXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBzdGFydDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmlvbi1mb290ZXIge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICAgIGJveC1zaGFkb3c6IDBweCAtMXB4IDZweCAwcHggcmdiYSgwLCAwLCAwLCAwLjIpO1xyXG4gICAgaW9uLWl0ZW0ge1xyXG4gICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgIGlvbi1pbnB1dCB7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgICAgICAgZm9udC1mYW1pbHk6IFwicnViaWtfaVwiO1xyXG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tZ3JheSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLnNlbmRfYnRuIHtcclxuICAgICAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICAgICAgd2lkdGg6IDUwcHg7XHJcbiAgICAgICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1teV90aGVtZSk7XHJcbiAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICAgIC0tYm9yZGVyLXJhZGl1czogMHB4O1xyXG4gICAgICAgIG1pbi13aWR0aDogNTBweDtcclxuICAgICAgICAtLXBhZGRpbmctc3RhcnQ6IDA7XHJcbiAgICAgICAgLS1wYWRkaW5nLWVuZDogMDtcclxuICAgICAgICBpb24taWNvbiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAyN3B4O1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDI3cHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW9uLWhlYWRlciBpb24tYmFjay1idXR0b24ge1xuICBjb2xvcjogdmFyKC0tYmx1ZSk7XG59XG5pb24taGVhZGVyIGlvbi10aXRsZSB7XG4gIGNvbG9yOiB2YXIoLS1ibHVlKTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDE4cHg7XG4gIGZvbnQtZmFtaWx5OiBcInNmX3VpX3NiXCI7XG4gIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xufVxuXG5pb24tY29udGVudCAudGRfbGJsIHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBjb2xvcjogdmFyKC0tYmx1ZSk7XG4gIGZvbnQtZmFtaWx5OiBcInNmX3VpX21kXCI7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLXRvcDogMTJweDtcbiAgbWFyZ2luLWJvdHRvbTogMTJweDtcbn1cbmlvbi1jb250ZW50IC5jaGF0X2RpdiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5pb24tY29udGVudCAuY2hhdF9kaXYgaW1nIHtcbiAgaGVpZ2h0OiA1N3B4O1xuICB3aWR0aDogNTdweDtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xuICBib3JkZXI6IHNvbGlkIDNweCB2YXIoLS13aGl0ZSk7XG4gIGJveC1zaGFkb3c6IDBweCAwcHggNXB4IDBweCByZ2JhKDMxLCAxNDAsIDIzNywgMC4yNSk7XG59XG5pb24tY29udGVudCAuY2hhdF9kaXYgLm1lc3NhZ2VfZGl2IC5jaGF0IHtcbiAgd2lkdGg6IDIzMHB4O1xuICBib3gtc2hhZG93OiAwcHggMHB4IDNweCAwcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuICBwYWRkaW5nOiAxNXB4O1xuICBtYXJnaW4tbGVmdDogMTVweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xufVxuaW9uLWNvbnRlbnQgLmNoYXRfZGl2IC5tZXNzYWdlX2RpdiAuY2hhdCAuY2hhdF9sYmwge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGNvbG9yOiB2YXIoLS1ibHVlKTtcbiAgZm9udC1mYW1pbHk6IFwic2ZfdWlfbWRfaVwiO1xuICBtYXJnaW4tdG9wOiAwO1xuICBtYXJnaW4tYm90dG9tOiA1cHg7XG59XG5pb24tY29udGVudCAuY2hhdF9kaXYgLnRpbWUge1xuICBmb250LXNpemU6IDEycHg7XG4gIGNvbG9yOiB2YXIoLS1saHRfYmx1ZSk7XG4gIGZvbnQtZmFtaWx5OiBcInNmX3VpX21kXCI7XG4gIG1hcmdpbi10b3A6IDhweDtcbiAgbWFyZ2luLWJvdHRvbTogMDtcbiAgdGV4dC1hbGlnbjogZW5kO1xufVxuaW9uLWNvbnRlbnQgLnJlcGxheV9kaXYge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xufVxuaW9uLWNvbnRlbnQgLnJlcGxheV9kaXYgLm1lc3NhZ2VfZGl2IC5jaGF0IHtcbiAgd2lkdGg6IDI1MHB4O1xuICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gIG1hcmdpbi1sZWZ0OiAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1teV90aGVtZSk7XG4gIGJveC1zaGFkb3c6IG5vbmU7XG59XG5pb24tY29udGVudCAucmVwbGF5X2RpdiAubWVzc2FnZV9kaXYgLmNoYXQgLmNoYXRfbGJsIHtcbiAgY29sb3I6IHZhcigtLXdoaXRlKTtcbn1cbmlvbi1jb250ZW50IC5yZXBsYXlfZGl2IC50aW1lIHtcbiAgdGV4dC1hbGlnbjogc3RhcnQ7XG59XG5cbmlvbi1mb290ZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGJveC1zaGFkb3c6IDBweCAtMXB4IDZweCAwcHggcmdiYSgwLCAwLCAwLCAwLjIpO1xufVxuaW9uLWZvb3RlciBpb24taXRlbSB7XG4gIHdpZHRoOiAxMDAlO1xufVxuaW9uLWZvb3RlciBpb24taXRlbSBpb24taW5wdXQge1xuICBmb250LXNpemU6IDEycHg7XG4gIGZvbnQtZmFtaWx5OiBcInJ1YmlrX2lcIjtcbiAgY29sb3I6IHZhcigtLWdyYXkpO1xufVxuaW9uLWZvb3RlciAuc2VuZF9idG4ge1xuICBoZWlnaHQ6IDUwcHg7XG4gIHdpZHRoOiA1MHB4O1xuICAtLWJhY2tncm91bmQ6IHZhcigtLW15X3RoZW1lKTtcbiAgbWFyZ2luOiAwO1xuICAtLWJvcmRlci1yYWRpdXM6IDBweDtcbiAgbWluLXdpZHRoOiA1MHB4O1xuICAtLXBhZGRpbmctc3RhcnQ6IDA7XG4gIC0tcGFkZGluZy1lbmQ6IDA7XG59XG5pb24tZm9vdGVyIC5zZW5kX2J0biBpb24taWNvbiB7XG4gIHdpZHRoOiAyN3B4O1xuICBoZWlnaHQ6IDI3cHg7XG59Il19 */\"","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Route, Router } from '@angular/router';\nimport { IonContent, NavController } from '@ionic/angular';\nimport { ActivatedRoute } from \"@angular/router\";\nimport { AuthService } from \"src/app/services/auth.service\";\nimport { ChatService } from 'src/app/services/chat.service';\nimport { snapshotToArray } from '../chat-users-list/chat-users-list.page';\nimport firebase from 'firebase';\nimport { HTTP } from '@ionic-native/http/ngx';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.page.html',\n  styleUrls: ['./chat.page.scss'],\n})\nexport class ChatPage implements OnInit {\n\n  @ViewChild('chatcontent', {static: false}) content: IonContent;\n\n  ID_Chat:string = \"\";\n\n  message:string = \"\";\n  chatMessages: any[] = [];\n  data: any;\n  chatDBRef:any;\n  chatUser;\n  constructor(private nav: NavController, \n              private route: ActivatedRoute, \n              private router: Router,\n              public firebaseAuthService: AuthService,\n              public chatService: ChatService,\n              public http: HTTP,\n              public http2: HttpClient\n              ) {\n   /*    this.route.queryParams.subscribe(params => {\n        if (params && params.special) {\n          this.data = JSON.parse(params.special);\n          console.log(this.data.ID_Chat);\n          this.ID_Chat = this.data.ID_Chat;\n          this.chatDBRef = this.firebaseAuthService.firebaseDB.doc('messages/'+this.data.ID_Chat);\n          \n        }\n      }); */\n      this.route.queryParams.subscribe(params => {\n        if (params && params.data) {\n          let data = JSON.parse(params.data);\n          data = JSON.parse(data)\n          this.parametros = true;\n          this.chatService.keymessage = data.key;\n          this.chatUser = data.chatuser\n          \n\n     \n        }\n          \n      });\n    }\n\n    /*  */\n    messages: any[] = [];\n    parametros;\n    user;\n\n  ngOnInit() {\n /*    this.getChat();\n    this.getUserWith()\n    this.chatService.readChats(); */\n    this.user = JSON.parse(sessionStorage.getItem('user'));\n    if (!this.parametros){\n\n      this.chatUser = this.chatService.user2\n      console.log(this.chatUser,'USER');\n    }\n    this.getMessages()\n\n    \n  }\n\n  getUserWith(){\n    if (JSON.parse(localStorage.getItem('user2'))){\n  this.chatUser = JSON.parse(localStorage.getItem('user2'))\n  console.log(this.chatUser)\n\n}else{\n  this.chatUser = JSON.parse(localStorage.getItem('users2'))\n  console.log(this.chatUser)\n}\n\n  }\n\n  ngOnDestroy(): void {\n    //Called once, before the instance is destroyed.\n    //Add 'implements OnDestroy' to the class.\n    this.chatService.stopread()\n  }\n\n/*   getMessage(){\n    this.chatService.getMessages\n  } */\n\n  \n\n  getChat(){\n\n\n/* console.log(localStorage.getItem('idchat'));\n    this.chatService.getMessages(localStorage.getItem('idchat')).on('value', resp=>{\n      let messages = snapshotToArray(resp)\n      console.log(messages);\n      this.chatMessages = messages;\n      console.log(this.chatMessages);\n      \n      setTimeout(() => {\n        this.scrollToBottom();\n    }, 500);\n    }) */\n  }\n\n  sendMessage(){\n\n    console.log(this.message);\n/* \n    let sendmessage = {\n      message: this.message,\n      sender: this.firebaseAuthService.usersign.uid,\n      read:'false',\n      sent: firebase.firestore.Timestamp.fromDate(new Date())\n    }\n\n\n    if (this.chatUser.displayName!='chatGroup'){\n\n      this.chatService.newMessage(sendmessage);\n      \n      this.message = '';\n    }else{\n      this.chatService.newMessageGroup(sendmessage, this.chatUser.uid);\n      this.message = '';\n      \n    } */\n\n\n    console.log(this.message);\n    this.chatService.sendMessage(this.message, this.firebaseAuthService.usersign, this.chatUser )\n    this.message = '';\n\n    this.chatService.getTokenID(this.chatUser.uid).once('value', token=>{\n\n      console.log(token.val(), 'USERS');\n\n      /* this.sendLocation(this.currentPos,token.val()) */\n      this.sendMessageNoti(this.message, this.chatService.keymessage,token.val() ,this.chatUser)\n\n    })\n    \n    \n  }\n\n  sendMessageNoti(message, keymessage, user, chatuser){\n\n    let data={\n      key: keymessage,\n      m: message,\n      user: chatuser\n\n    }\n\n    console.log(data,'data');\n    console.log(user,'U');\n\n    let body = {\n      \"notification\":{\n        \"title\":\"PeerRecovery\",\n        \"body\":\"New Message\",\n        \"sound\":\"default\",\n        \"click_action\":\"FCM_PLUGIN_ACTIVITY\",\n        \"icon\":\"fcm_push_icon\"\n      },\n      \"data\":{\n        \"landing_page\":\"chat\",\n        \"data\":data\n      },\n        \"to\":user,\n        \"priority\":\"high\",\n        \"restricted_package_name\":\"\"\n    }\n\n    let headers = {\n      'Authorization': 'key=AAAA7CwLHfI:APA91bGdbyFJFwO4xWEBilRVInU37vOoQ5jURZv0PHbD8zXc4pT58GEy1ETkskaOfIJEhHtR4YYMr4SbDRiuEI7BJG0JfoXDbguV691brsZri_bLqMQLc-FWffr1EakQsurEnb0ZrN2_',\n      'Content-Type': 'application/json'\n    }\n\n /*    this.http.post('https://fcm.googleapis.com/fcm/send',body,headers).then(res=>{\n      console.log(res,'res');\n    }).catch(e=>{\n      console.log(e,'e');\n    }) */\n\n\n    this.http2.post('https://fcm.googleapis.com/fcm/send',body,{headers}).subscribe(res=>{\n      console.log(res);\n    })\n\n  }\n\n\n  goToChatList(){\n    this.nav.navigateBack(\"/chat\")\n    localStorage.removeItem('user2')\n    localStorage.removeItem('users2')\n    localStorage.removeItem('idchat')\n  }\n\n\n  scrollToBottom(){\n    this.content.scrollToBottom(300);\n    //document.getElementById('chatcontent').scrollTo();\n  }\n\n\n  eventoMensaje(tecla){\n    console.log(tecla);\n    if (tecla==13){\n      this.sendMessage();\n    }\n  }\n\n\n\n  /*  */\n\n  getMessages(){\n    \n    this.chatService.getMessages().orderByChild('timestamp').on('value', resp=>{\n      this.messages = [];\n      \n      resp.forEach((childSnapshot: any) =>{\n        let m = childSnapshot.val();\n        console.log(childSnapshot.val());\n\n        this.chatService.getUser(m.sender).on('value', resp=>{\n          /* console.log(resp.val()); */\n          m.senderuser = resp.val();\n          \n          \n          \n          \n          this.messages.push(m);\n          this.chatMessages = this.messages;\n         })\n\n\n\n        \n         \n        \n         setTimeout(() => {\n          this.scrollToBottom();\n      }, 500);\n        \n      })\n\n      console.log(this.messages);\n\n    })\n\n    this.chatService.cleanUnread(this.user.uid,this.chatService.keymessage)\n  }\n\n\n\n\n}\n\n     "],"sourceRoot":"webpack:///"}