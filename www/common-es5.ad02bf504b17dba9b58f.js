function asyncGeneratorStep(e,t,a,n,r,s,i){try{var u=e[s](i),o=u.value}catch(l){return void a(l)}u.done?t(o):Promise.resolve(o).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function i(e){asyncGeneratorStep(s,n,r,i,u,"next",e)}function u(e){asyncGeneratorStep(s,n,r,i,u,"throw",e)}i(void 0)}))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+/my":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("JZFu"),r=a("8Y7J"),s=a("fMxG"),i=function(){var e=function(){function e(t){_classCallCheck(this,e),this.storage=t}return _createClass(e,[{key:"getUsers",value:function(){return n.a.database().ref("Users")}},{key:"getRel",value:function(e,t){return n.a.database().ref("Relations/"+e.uid+"/"+t)}},{key:"newcall",value:function(e,t){var a={timestamp:n.a.firestore.Timestamp.fromDate(new Date),channel:"",state:!0},r=n.a.database().ref("VideosCall/VideosCall/").push(a).key;a.channel=r,n.a.database().ref("VideosCall/VideosCall/"+r).set(a),n.a.database().ref("VideosCall/VideosCall/"+r+"/Members/"+e.uid).set(!0),n.a.database().ref("VideosCall/VideosCall/"+r+"/Members/"+t.uid).set(!1),n.a.database().ref("VideosCall/VideosCall/"+e.uid+"/"+r).set(t.uid),n.a.database().ref("VideosCall/VideosCall/"+t.uid+"/"+r).set(e.uid),this.keycall=r}},{key:"getCall",value:function(e){return n.a.database().ref("VideosCall/VideosCall/"+e)}},{key:"hangup",value:function(e,t){n.a.database().ref("VideosCall/VideosCall/"+t+"/Members/"+e.uid).set(!1),n.a.database().ref("VideosCall/VideosCall/"+t+"/state").set(!1)}},{key:"reconnect",value:function(e,t){n.a.database().ref("VideosCall/VideosCall/"+t+"/Members/"+e.uid).set(!0),n.a.database().ref("VideosCall/VideosCall/"+t+"/state").set(!0)}},{key:"answerccall",value:function(e,t){n.a.database().ref("VideosCall/VideosCall/"+t+"/Members/"+e.uid).set(!0)}},{key:"getCalls",value:function(e){return n.a.database().ref("VideosCall/VideosCall/"+e.uid)}},{key:"getUser",value:function(e){return n.a.database().ref("Users/"+e)}},{key:"downloadvideo",value:function(e){return n.a.storage().ref("Videos/"+e)}},{key:"tareaCloudStorage",value:function(e,t){return this.storage.upload("Videos/"+e,t)}}]),e}();return e.ngInjectableDef=r.Qb({factory:function(){return new e(r.Rb(s.a))},token:e,providedIn:"root"}),e}()},"5ek2":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a("EuEP");var n=function e(){_classCallCheck(this,e)}},"74mu":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return u}));var n=function(e,t){return null!==t.closest(e)},r=function(e,t){return"string"==typeof e&&e.length>0?Object.assign(_defineProperty({"ion-color":!0},"ion-color-"+e,!0),t):t},s=function(e){var t={};return function(e){return void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter((function(e){return null!=e})).map((function(e){return e.trim()})).filter((function(e){return""!==e})):[]}(e).forEach((function(e){return t[e]=!0})),t},i=/^[a-z][a-z0-9+\-.]*:/,u=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,a,n,r){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||"#"===t[0]||i.test(t)){e.next=4;break}if(!(s=document.querySelector("ion-router"))){e.next=4;break}return e.abrupt("return",(null!=a&&a.preventDefault(),s.push(t,n,r)));case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},BAG3:function(e,t,a){"use strict";var n=a("8Y7J"),r=a("MKJQ"),s=a("sZkV"),i=a("SVse"),u=a("EuEP"),o=a("Ig/m"),l=a("iInd");a.d(t,"a",(function(){return h}));var c=n.pb({encapsulation:0,styles:[[""]],data:{}});function d(e){return n.Mb(0,[(e()(),n.rb(0,0,null,null,10,"ion-item",[["lines","full"],["mode","md"]],null,[[null,"click"]],(function(e,t,a){var n=!0;return"click"===t&&(n=!1!==e.component.closeModal(e.context.$implicit)&&n),n}),r.hb,r.t)),n.qb(1,49152,null,0,s.H,[n.h,n.k,n.x],{lines:[0,"lines"],mode:[1,"mode"]},null),(e()(),n.rb(2,0,null,0,2,"ion-avatar",[["slot","start"]],null,null,null,r.P,r.b)),n.qb(3,49152,null,0,s.f,[n.h,n.k,n.x],null,null),(e()(),n.rb(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),n.rb(5,0,null,0,5,"ion-label",[],null,null,null,r.ib,r.u)),n.qb(6,49152,null,0,s.N,[n.h,n.k,n.x],null,null),(e()(),n.rb(7,0,null,0,1,"h3",[["class","name"]],null,null,null,null,null)),(e()(),n.Kb(8,null,["",""])),(e()(),n.rb(9,0,null,0,1,"p",[["class","detail"]],null,null,null,null,null)),(e()(),n.Kb(10,null,["",""]))],(function(e,t){e(t,1,0,"full","md")}),(function(e,t){e(t,4,0,null==t.context.$implicit?null:t.context.$implicit.photoUrl),e(t,8,0,null==t.context.$implicit?null:t.context.$implicit.displayName),e(t,10,0,null==t.context.$implicit?null:t.context.$implicit.email)}))}function f(e){return n.Mb(0,[(e()(),n.rb(0,0,null,null,11,"ion-header",[["class","ion-no-border"]],null,null,null,r.eb,r.q)),n.qb(1,49152,null,0,s.B,[n.h,n.k,n.x],null,null),(e()(),n.rb(2,0,null,0,9,"ion-toolbar",[["mode","md"]],null,null,null,r.Bb,r.N)),n.qb(3,49152,null,0,s.zb,[n.h,n.k,n.x],{mode:[0,"mode"]},null),(e()(),n.rb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,r.T,r.f)),n.qb(5,49152,null,0,s.l,[n.h,n.k,n.x],null,null),(e()(),n.rb(6,0,null,0,2,"ion-back-button",[["defaultHref","home"],["icon","chevron-back-outline"],["mode","md"],["text",""]],null,[[null,"click"]],(function(e,t,a){var r=!0;return"click"===t&&(r=!1!==n.Cb(e,8).onClick(a)&&r),r}),r.Q,r.c)),n.qb(7,49152,null,0,s.g,[n.h,n.k,n.x],{defaultHref:[0,"defaultHref"],icon:[1,"icon"],mode:[2,"mode"],text:[3,"text"]},null),n.qb(8,16384,null,0,s.h,[[2,s.fb],s.Gb,s.d],{defaultHref:[0,"defaultHref"]},null),(e()(),n.rb(9,0,null,0,2,"ion-title",[],null,null,null,r.zb,r.L)),n.qb(10,49152,null,0,s.xb,[n.h,n.k,n.x],null,null),(e()(),n.Kb(-1,0,["Users"])),(e()(),n.rb(12,0,null,null,4,"ion-content",[],null,null,null,r.X,r.j)),n.qb(13,49152,null,0,s.u,[n.h,n.k,n.x],null,null),(e()(),n.rb(14,0,null,0,2,"div",[["class","today_div"]],null,null,null,null,null)),(e()(),n.gb(16777216,null,null,1,null,d)),n.qb(16,278528,null,0,i.j,[n.O,n.K,n.q],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var a=t.component;e(t,3,0,"md"),e(t,7,0,"home","chevron-back-outline","md",""),e(t,8,0,"home"),e(t,16,0,a.Users)}),null)}var h=n.nb("app-panics",u.a,(function(e){return n.Mb(0,[(e()(),n.rb(0,0,null,null,1,"app-panics",[],null,null,null,f,c)),n.qb(1,114688,null,0,u.a,[o.a,l.m,s.Fb,s.Hb],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[])},EuEP:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("mrSG");a("Ig/m");var r=function(){function e(t,a,n,r){_classCallCheck(this,e),this.trackingSVC=t,this.router=a,this.modalController=n,this.navParams=r,this.Users=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.user=JSON.parse(sessionStorage.getItem("user")),this.getUser()}},{key:"getUser",value:function(){var e=this;this.trackingSVC.getUsers().on("value",(function(t){e.Users=[],t.forEach((function(t){var a=t.val();a.key=t.key,a.key!=e.user.uid&&(console.log(a),console.log(e.user),e.trackingSVC.getRel(e.user,a.key).once("value",(function(t){console.log(t),console.log(t.val()),a.selected=t.val(),t.val()&&e.Users.push(a)})))})),console.log(e.Users)}))}},{key:"selectUser",value:function(e){console.log(e),this.trackingSVC.panicselectUser=e}},{key:"closeModal",value:function(e){return n.a(this,void 0,void 0,regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=JSON.stringify(e),t.next=3,this.modalController.dismiss(a);case 3:case"end":return t.stop()}}),t,this)})))}}]),e}()},"Ig/m":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("JZFu"),r=a("8Y7J"),s=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"updateLocation",value:function(e,t,a){var r={lat:e,lng:t,timestamp:n.a.firestore.Timestamp.fromDate(new Date)};n.a.database().ref("Tracking/"+a.uid+"/Current").set(r),n.a.database().ref("Tracking/"+a.uid+"/Historic").push(r)}},{key:"getLocation",value:function(e){return n.a.database().ref("Tracking/"+e.uid+"/Current")}},{key:"getHistoric",value:function(e){return n.a.database().ref("Tracking/"+e.uid+"/Historic")}},{key:"getUser",value:function(e){return n.a.database().ref("Users/"+e)}},{key:"getPanic",value:function(e){return n.a.database().ref("Tracking/Panic/"+e)}},{key:"getUsers",value:function(){return n.a.database().ref("Users")}},{key:"getRel",value:function(e,t){return n.a.database().ref("Relations/"+e.uid+"/"+t)}}]),e}();return e.ngInjectableDef=r.Qb({factory:function(){return new e},token:e,providedIn:"root"}),e}()},JbSX:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("wEJo"),r=a("qULd"),s=a("iWo5"),i=function(e,t){var a,i,u=function(e,n,r){if("undefined"!=typeof document){var s=document.elementFromPoint(e,n);s&&t(s)?s!==a&&(l(),o(s,r)):l()}},o=function(e,t){a=e,i||(i=a);var r=a;Object(n.f)((function(){return r.classList.add("ion-activated")})),t()},l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a){var t=a;Object(n.f)((function(){return t.classList.remove("ion-activated")})),e&&i!==a&&a.click(),a=void 0}};return Object(s.createGesture)({el:e,gestureName:"buttonActiveDrag",threshold:0,onStart:function(e){return u(e.currentX,e.currentY,r.a)},onMove:function(e){return u(e.currentX,e.currentY,r.b)},onEnd:function(){l(!0),Object(r.e)(),i=void 0}})}},KJxK:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var n=a("8Y7J"),r=function(){function e(t,a){_classCallCheck(this,e),this._mapsWrapper=t,this._markerManager=a,this.visible=!0,this.zIndex=1,this.markerClick=new n.m,this.openInfoWindow=!0,this.infoWindow=new n.B,this.draggable=!1,this._observableSubscriptions=[]}return _createClass(e,[{key:"ngAfterViewInit",value:function(){for(var e=this,t=this.template.nativeElement.getElementsByTagName("agm-info-window"),a=t.length-1;a>=0;--a)t[a].parentNode.removeChild(t[a]);this.load().then((function(){e.onChanges=e.onChangesOverride}))}},{key:"ngAfterContentInit",value:function(){var e=this;this.infoWindow.changes.subscribe((function(){return e.handleInfoWindowUpdate()}))}},{key:"ngOnChanges",value:function(e){this.onChanges(e)}},{key:"onChanges",value:function(e){}},{key:"onChangesOverride",value:function(e){var t=this;(e.latitude||e.longitude||e.zIndex)&&(this.overlayView.latitude=this.latitude,this.overlayView.longitude=this.longitude,this.overlayView.zIndex=this.zIndex,this.destroy().then((function(){return t.load()})))}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"destroy",value:function(){this.destroyed=!0;var e=this._markerManager.deleteMarker(this.overlayView);return this.overlayView&&(this.overlayView.div&&this.overlayView.remove(),this.overlayView.setMap(null)),this._observableSubscriptions.forEach((function(e){return e.unsubscribe()})),delete this.overlayView,e}},{key:"handleInfoWindowUpdate",value:function(){var e=this;if(this.infoWindow.length>1)throw new Error("Expected no more than one info window.");this.infoWindow.forEach((function(t){t.hostMarker=e.overlayView}))}},{key:"load",value:function(){var e=this;return this._mapsWrapper.getNativeMap().then((function(t){var a=e.getOverlay(t);return e._markerManager.addMarker(a),e._addEventListeners(),e._markerManager.getNativeMarker(a)})).then((function(t){var a=t.setMap;t.map&&e.overlayView.setMap(t.map),t.setMap=function(n){a.call(t,n),e.overlayView&&e.overlayView.setMap(n)}}))}},{key:"getOverlay",value:function(e){var t=this;this.overlayView=this.overlayView||new google.maps.OverlayView,this.overlayView.iconUrl=" ",this.overlayView.latitude=this.latitude,this.overlayView.longitude=this.longitude,this.overlayView.visible=!1,this.bounds&&(this.overlayView.bounds_=new google.maps.LatLngBounds(new google.maps.LatLng(this.latitude+this.bounds.x.latitude,this.longitude+this.bounds.x.longitude),new google.maps.LatLng(this.latitude+this.bounds.y.latitude,this.longitude+this.bounds.y.longitude)));var a=this.template.nativeElement.children[0];return this.overlayView.remove=function(){var e;this.div&&(this.div.parentNode.removeChild(this.div),e=this.div,t.template.nativeElement.appendChild(e),delete this.div)},this.overlayView.getDiv=function(){return this.div},this.overlayView.draw=function(){if(!this.div){this.div=a;var e=this.getPanes();if(!e||!e.overlayImage)return;e.overlayImage.appendChild(a)}var t=new google.maps.LatLng(this.latitude,this.longitude),n=this.getProjection();if(n){var r=n.fromLatLngToDivPixel(t);if(r&&(a.style.left=r.x-10+"px",a.style.top=r.y-20+"px"),this.bounds_){var s=this.getProjection(),i=s.fromLatLngToDivPixel(this.bounds_.getSouthWest()),u=s.fromLatLngToDivPixel(this.bounds_.getNorthEast());this.div.style.left=i.x+"px",this.div.style.top=u.y+"px",this.div.children[0].style.width=u.x-i.x+"px",this.div.children[0].style.height=i.y-u.y+"px"}}},a.addEventListener("click",(function(e){t.handleTap(),e.stopPropagation()})),this.handleInfoWindowUpdate(),this.overlayView}},{key:"handleTap",value:function(){this.openInfoWindow&&this.infoWindow.forEach((function(e){e.open()})),this.markerClick.emit(null)}},{key:"_addEventListeners",value:function(){var e=this,t=this._markerManager.createEventObservable("click",this.overlayView).subscribe((function(){return e.handleTap()}));this._observableSubscriptions.push(t)}}]),e}(),s=function e(){_classCallCheck(this,e)}},"N/pL":function(e,t,a){"use strict";a.r(t),a.d(t,"PanicsPageModuleNgFactory",(function(){return h}));var n=a("8Y7J"),r=a("YbcC"),s=a("pMnS"),i=a("BAG3"),u=a("SVse"),o=a("s7LF"),l=a("sZkV"),c=a("iInd"),d=a("5ek2"),f=a("EuEP"),h=n.ob(r.a,[],(function(e){return n.zb([n.Ab(512,n.j,n.Z,[[8,[s.a,i.a]],[3,n.j],n.v]),n.Ab(4608,u.m,u.l,[n.s,[2,u.v]]),n.Ab(4608,o.o,o.o,[]),n.Ab(4608,l.b,l.b,[n.x,n.g]),n.Ab(4608,l.Fb,l.Fb,[l.b,n.j,n.p]),n.Ab(4608,l.Jb,l.Jb,[l.b,n.j,n.p]),n.Ab(1073742336,u.c,u.c,[]),n.Ab(1073742336,o.n,o.n,[]),n.Ab(1073742336,o.e,o.e,[]),n.Ab(1073742336,l.Bb,l.Bb,[]),n.Ab(1073742336,c.o,c.o,[[2,c.t],[2,c.m]]),n.Ab(1073742336,d.a,d.a,[]),n.Ab(1073742336,r.a,r.a,[]),n.Ab(1024,c.k,(function(){return[[{path:"",component:f.a}]]}),[])])}))},Oz3r:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("lGQG"),r=a("JZFu"),s=a("8Y7J"),i=function(){var e=function(){function e(t){_classCallCheck(this,e),this.firebaseAuthService=t}return _createClass(e,[{key:"getAppointment",value:function(e){return r.a.database().ref("Appointments").child(e)}},{key:"updateAppointment",value:function(e,t){return r.a.database().ref("Appointments").child(e).update(t)}},{key:"getAppointments",value:function(){return r.a.database().ref("Appointments/").orderByChild("userID").equalTo(this.firebaseAuthService.usersign.uid)}},{key:"postAppointment",value:function(e){var t=this.firebaseAuthService.usersign.uid+"_"+Date.now();r.a.database().ref("/Appointments/"+t).set(e)}},{key:"getApps",value:function(e){return r.a.database().ref("Appointment/Users/"+e)}},{key:"addApp",value:function(e){console.log(e);var t=r.a.database().ref("Appointment/Apps").push(e).key;r.a.database().ref("Appointment/Users/"+e.user+"/"+t).set(e)}},{key:"editapp",value:function(e){r.a.database().ref("Appointment/Apps/"+e.appkey+"/").set(e),r.a.database().ref("Appointment/Users/"+e.user+"/"+e.appkey).set(e)}}]),e}();return e.ngInjectableDef=s.Qb({factory:function(){return new e(s.Rb(n.a))},token:e,providedIn:"root"}),e}()},YbcC:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function e(){_classCallCheck(this,e)}},acej:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var n=a("1vRN"),r=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,a,r,s,i){var u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t.attachViewToDom(a,r,i,s));case 2:if("string"==typeof r||r instanceof HTMLElement){e.next=4;break}throw new Error("framework delegate is missing");case 4:return u="string"==typeof r?a.ownerDocument&&a.ownerDocument.createElement(r):r,s&&s.forEach((function(e){return u.classList.add(e)})),i&&Object.assign(u,i),a.appendChild(u),e.next=10,new Promise((function(e){return Object(n.c)(u,e)}));case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n,r,s){return e.apply(this,arguments)}}(),s=function(e,t){if(t){if(e)return e.removeViewFromDom(t.parentElement,t);t.remove()}return Promise.resolve()}},h3R7:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={bubbles:{dur:1e3,circles:9,fn:function(e,t,a){var n=e*t/a-e+"ms",r=2*Math.PI*t/a;return{r:5,style:{top:9*Math.sin(r)+"px",left:9*Math.cos(r)+"px","animation-delay":n}}}},circles:{dur:1e3,circles:8,fn:function(e,t,a){var n=t/a,r=e*n-e+"ms",s=2*Math.PI*n;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":r}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:function(){return{r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}}}},crescent:{dur:750,circles:1,fn:function(){return{r:26,style:{}}}},dots:{dur:750,circles:3,fn:function(e,t){return{r:6,style:{left:9-9*t+"px","animation-delay":-110*t+"ms"}}}},lines:{dur:1e3,lines:12,fn:function(e,t,a){return{y1:17,y2:29,style:{transform:"rotate(".concat(30*t+(t<6?180:-180),"deg)"),"animation-delay":e*t/a-e+"ms"}}}},"lines-small":{dur:1e3,lines:12,fn:function(e,t,a){return{y1:12,y2:20,style:{transform:"rotate(".concat(30*t+(t<6?180:-180),"deg)"),"animation-delay":e*t/a-e+"ms"}}}}}},qULd:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return u}));var n={getEngine:function(){var e=window;return e.TapticEngine||e.Capacitor&&e.Capacitor.isPluginAvailable("Haptics")&&e.Capacitor.Plugins.Haptics},available:function(){return!!this.getEngine()},isCordova:function(){return!!window.TapticEngine},isCapacitor:function(){return!!window.Capacitor},impact:function(e){var t=this.getEngine();if(t){var a=this.isCapacitor()?e.style.toUpperCase():e.style;t.impact({style:a})}},notification:function(e){var t=this.getEngine();if(t){var a=this.isCapacitor()?e.style.toUpperCase():e.style;t.notification({style:a})}},selection:function(){this.impact({style:"light"})},selectionStart:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionStart():e.gestureSelectionStart())},selectionChanged:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionChanged():e.gestureSelectionChanged())},selectionEnd:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionEnd():e.gestureSelectionEnd())}},r=function(){n.selection()},s=function(){n.selectionStart()},i=function(){n.selectionChanged()},u=function(){n.selectionEnd()},o=function(e){n.impact(e)}},rk0U:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("JZFu"),r=a("8Y7J"),s=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addReward",value:function(e){console.log(e);var t=n.a.database().ref("Rewards/Rewards").push(e).key;n.a.database().ref("Rewards/Tasks/"+t).set(e.task),n.a.database().ref("Rewards/Users/"+e.user+"/"+t).set(e)}},{key:"getRewards",value:function(e){return n.a.database().ref("Rewards/Users/"+e)}},{key:"editReward",value:function(e){console.log(e),n.a.database().ref("Rewards/Rewards/"+e.rewardkey).set(e),n.a.database().ref("Rewards/Tasks/"+e.rewardkey).set(e.task),n.a.database().ref("Rewards/Users/"+e.user+"/"+e.rewardkey).set(e)}},{key:"addTask",value:function(){}},{key:"removeTask",value:function(e){n.a.database().ref("Rewards/Rewards/"+e.rewardkey+"/task").set(e.task),n.a.database().ref("Rewards/Tasks/"+e.rewardkey).set(e.task),n.a.database().ref("Rewards/Users/"+e.user+"/"+e.rewardkey).set(e)}},{key:"edittask",value:function(e,t,a){n.a.database().ref("Rewards/Rewards/"+e.rewardkey+"/task/"+a).set(t),n.a.database().ref("Rewards/Tasks/"+e.rewardkey+"/"+a).set(t),n.a.database().ref("Rewards/Users/"+e.user+"/"+e.rewardkey+"/task/"+a).set(t)}}]),e}();return e.ngInjectableDef=r.Qb({factory:function(){return new e},token:e,providedIn:"root"}),e}()},sjK5:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("lGQG"),r=a("XNiG"),s=a("JZFu"),i=a("8Y7J"),u=function(){var e=function(){function e(t){_classCallCheck(this,e),this.firebaseAuthService=t,this.subject=new r.a,this.chatsUsers=[],this.users=[]}return _createClass(e,[{key:"getUserChats",value:function(){return s.a.database().ref(this.firebaseAuthService.usersign.uid+"/members/")}},{key:"getChatsMembers",value:function(e){return s.a.database().ref(this.firebaseAuthService.usersign.uid+"/members/"+e)}},{key:"getChats",value:function(){return s.a.database().ref(this.firebaseAuthService.usersign.uid+"/chats/")}},{key:"getUser",value:function(e){return s.a.database().ref("Users/"+e)}},{key:"getUsers",value:function(){return s.a.database().ref("Users/")}},{key:"getRel",value:function(e,t){return s.a.database().ref("Relations/"+e.uid+"/"+t)}},{key:"getChat2",value:function(e,t){return s.a.database().ref("Chats/Chats/"+e.uid).orderByValue().equalTo(t)}},{key:"getChat",value:function(e,t){return s.a.database().ref("Chats/Chats/"+e.uid+"/"+t)}},{key:"getMessages",value:function(){return s.a.database().ref("Chats/Messages/"+this.keymessage)}},{key:"addChat",value:function(e,t){var a={name:"single",timestamp:s.a.firestore.Timestamp.fromDate(new Date),members:{user1:e.uid,user2:t.uid}},n=s.a.database().ref("Chats/Chats/").push(a).key;s.a.database().ref("Chats/Chats/"+e.uid+"/"+n).set(t.uid),s.a.database().ref("Chats/Chats/"+t.uid+"/"+n).set(e.uid),this.keymessage=n}},{key:"addGroup",value:function(e,t,a){var n=[];n.push(e.uid);for(var r=0;r<a.length;r++)n.push(a[r].uid);for(var i={name:t,timestamp:s.a.firestore.Timestamp.fromDate(new Date),members:{users:n}},u=s.a.database().ref("Chats/Chats/").push(i).key,o=0;o<a.length;o++)s.a.database().ref("Chats/Chats/"+e.uid+"/"+u).set(a[o].uid),s.a.database().ref("Chats/Chats/"+a[o].uid+"/"+u).set(e.uid);this.keymessage=u}},{key:"newChat",value:function(e){var t={timestamp:new Date,type:"single"},a=s.a.database().ref(this.firebaseAuthService.usersign.uid+"/chats/").push(t).key;return s.a.database().ref(e.uid+"/chats/"+a).set(t),s.a.database().ref("/chats/"+a).set(t),s.a.database().ref(this.firebaseAuthService.usersign.uid+"/members/"+a+"/"+e.uid).set("true"),s.a.database().ref(this.firebaseAuthService.usersign.uid+"/members/"+a+"/"+this.firebaseAuthService.usersign.uid).set("true"),s.a.database().ref(e.uid+"/members/"+a+"/"+e.uid).set("true"),s.a.database().ref(e.uid+"/members/"+a+"/"+this.firebaseAuthService.usersign.uid).set("true"),s.a.database().ref("/members/"+a+"/"+e.uid).set("true"),s.a.database().ref("/members/"+a+"/"+this.firebaseAuthService.usersign.uid).set("true"),a}},{key:"newMessage",value:function(e){console.log(e);var t=JSON.parse(localStorage.getItem("user2"));s.a.database().ref(this.firebaseAuthService.usersign.uid+"/messages/"+localStorage.getItem("idchat")).push(e),s.a.database().ref(t.uid+"/messages/"+localStorage.getItem("idchat")).push(e),s.a.database().ref("/messages/"+localStorage.getItem("idchat")).push(e)}},{key:"sendMessage",value:function(e,t,a){var n={message:e,timestamp:s.a.firestore.Timestamp.fromDate(new Date),sender:t.uid};s.a.database().ref("Chats/Messages/"+this.keymessage).push(n),s.a.database().ref("Chats/Unread/"+a.uid+"/"+this.keymessage).push(n)}},{key:"getTokenID",value:function(e){return s.a.database().ref("Token/"+e+"/id")}},{key:"newMessageGroup",value:function(e,t){var a=this;console.log(e),JSON.parse(localStorage.getItem("user2")),s.a.database().ref(this.firebaseAuthService.usersign.uid+"/messages/"+localStorage.getItem("idchat")).push(e),s.a.database().ref("/messages/"+localStorage.getItem("idchat")).push(e),s.a.database().ref("/members/").orderByKey().equalTo(t).on("value",(function(t){var n,r=(n=[],t.forEach((function(e){var t=e.val();n.push(t)})),n);console.log(r),r.forEach((function(t){console.log(t);var n=Object.keys(t).filter((function(e){return e!=a.firebaseAuthService.usersign.uid&&"key"!=e}));console.log(n),n.forEach((function(t){s.a.database().ref(t+"/messages/"+localStorage.getItem("idchat")).push(e)}))}))}))}},{key:"readChats",value:function(){var e=this,t=localStorage.getItem("idchat");s.a.database().ref(this.firebaseAuthService.usersign.uid+"/messages/"+t).once("value",(function(a){var n,r=(n=[],a.forEach((function(e){var t=e.val();t.key=e.key,n.push(t)})),n);console.log(r),r.forEach((function(a){a.sender!=e.firebaseAuthService.usersign.uid&&s.a.database().ref(e.firebaseAuthService.usersign.uid+"/messages/"+t+"/"+a.key+"/read").set("true")}))}))}},{key:"stopread",value:function(){console.log("stop read"),localStorage.getItem("idchat"),s.a.database().ref(this.firebaseAuthService.usersign.uid+"/messages/").off()}},{key:"unreadChats",value:function(e,t){return s.a.database().ref("Chats/Unread/"+e+"/"+t)}},{key:"cleanUnread",value:function(e,t){s.a.database().ref("Chats/Unread/"+e+"/"+t).remove()}},{key:"newChatGroup",value:function(e){var t=this,a={timestamp:new Date,type:"group"};console.log(e);var n=s.a.database().ref(this.firebaseAuthService.usersign.uid+"/chats/").push(a).key;return s.a.database().ref("/chats/"+n).set(a),s.a.database().ref(this.firebaseAuthService.usersign.uid+"/members/"+n+"/"+this.firebaseAuthService.usersign.uid).set("true"),s.a.database().ref("/members/"+n+"/"+this.firebaseAuthService.usersign.uid).set("true"),e.forEach((function(e){s.a.database().ref(e.uid+"/members/"+n+"/"+e.uid).set("true"),s.a.database().ref(e.uid+"/members/"+n+"/"+t.firebaseAuthService.usersign.uid).set("true"),s.a.database().ref("/members/"+n+"/"+e.uid).set("true"),s.a.database().ref(t.firebaseAuthService.usersign.uid+"/members/"+n+"/"+e.uid).set("true"),s.a.database().ref(e.uid+"/chats/"+n).set(a)})),n}},{key:"getUsersChat",value:function(e){return s.a.database().ref("Chats/Chats/"+e.uid)}},{key:"getChatType",value:function(e){return s.a.database().ref("Chats/Chats/"+e)}}]),e}();return e.ngInjectableDef=i.Qb({factory:function(){return new e(i.Rb(n.a))},token:e,providedIn:"root"}),e}()}}]);